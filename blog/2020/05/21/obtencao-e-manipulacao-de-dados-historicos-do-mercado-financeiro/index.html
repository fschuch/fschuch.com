<!doctype html><html lang=pt-br><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.1.0 for Hugo"><meta name=author content="Felipe N. Schuch"><meta name=description content="Demonstra-se o uso do módulo yfinance para o acesso a dados históricos do mercado financeiro, bem como o módulo mplfinance, para a sua representação gráfica."><link rel=alternate hreflang=pt-br href=https://www.fschuch.com/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#3f51b5"><script src=/js/mathjax-config.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/atom-one-light.min.css crossorigin=anonymous title=hl-light media=print onload="this.media='all'"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/atom-one-light.min.css crossorigin=anonymous title=hl-dark media=print onload="this.media='all'" disabled><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload="this.media='all'"><link rel=stylesheet href=/css/wowchemy.304d0419c2aa44a04e284fe6adec1562.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-177068857-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}function trackOutboundLink(a,b){gtag('event','click',{event_category:'outbound',event_label:a,transport_type:'beacon',event_callback:function(){b!=='_blank'&&(document.location=a)}}),console.debug("Outbound link clicked: "+a)}function onClickCallback(a){if(a.target.tagName!=='A'||a.target.host===window.location.host)return;trackOutboundLink(a.target,a.target.getAttribute('target'))}gtag('js',new Date),gtag('config','UA-177068857-1',{anonymize_ip:!0}),gtag('set',{cookie_flags:'SameSite=None;Secure'}),document.addEventListener('click',onClickCallback,!1)</script><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/media/icon_hu25d0b20bf2bf90ac27c6cbd6ce22358d_22074_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu25d0b20bf2bf90ac27c6cbd6ce22358d_22074_180x180_fill_lanczos_center_2.png><link rel=canonical href=https://www.fschuch.com/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@fschuch"><meta property="twitter:creator" content="@fschuch"><meta property="og:site_name" content="F. Schuch"><meta property="og:url" content="https://www.fschuch.com/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/"><meta property="og:title" content="Obtenção e manipulação de dados históricos do mercado financeiro | F. Schuch"><meta property="og:description" content="Demonstra-se o uso do módulo yfinance para o acesso a dados históricos do mercado financeiro, bem como o módulo mplfinance, para a sua representação gráfica."><meta property="og:image" content="https://www.fschuch.com/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/featured.png"><meta property="twitter:image" content="https://www.fschuch.com/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/featured.png"><meta property="og:locale" content="pt-br"><meta property="article:published_time" content="2020-05-21T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-05T14:31:45-03:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.fschuch.com/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/"},"headline":"Obtenção e manipulação de dados históricos do mercado financeiro","image":["https://www.fschuch.com/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/featured.png"],"datePublished":"2020-05-21T00:00:00Z","dateModified":"2025-07-05T14:31:45-03:00","author":{"@type":"Person","name":"Felipe N. Schuch"},"publisher":{"@type":"Organization","name":"F. Schuch","logo":{"@type":"ImageObject","url":"https://www.fschuch.com/media/icon_hu25d0b20bf2bf90ac27c6cbd6ce22358d_22074_192x192_fill_lanczos_center_2.png"}},"description":"Demonstra-se o uso do módulo yfinance para o acesso a dados históricos do mercado financeiro, bem como o módulo mplfinance, para a sua representação gráfica."}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#3f51b5",text:"rgb(255, 255, 255)"},button:{background:"rgb(255, 255, 255)",text:"#3f51b5"}},theme:"classic",content:{message:"Este site contém cookies para garantir que você tenha a melhor experência.",dismiss:"Entendi!",link:"Saiba mais",href:"https://www.cookiesandyou.com"}})})</script><title>Obtenção e manipulação de dados históricos do mercado financeiro | F. Schuch</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=d8733dc8ff64f4929a7fb58067ef555e><script src=/js/wowchemy-init.min.f16be01fc8fb2b5885dd67ce942d1185.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Pesquisar</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Pesquisar... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Pesquisar...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class=page-header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>F. Schuch</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Alterar navegação">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>F. Schuch</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Sobre</span></a></li><li class=nav-item><a class=nav-link href=/#posts><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projetos</span></a></li><li class=nav-item><a class=nav-link href=/#featured><span>Publicações</span></a></li><li class=nav-item><a class=nav-link href=/#events><span>Palestras</span></a></li><li class=nav-item><a class=nav-link href=/#contact><span>Contato</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Pesquisar><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></div><div class=page-body><article class=article><div class="article-container pt-3"><h1>Obtenção e manipulação de dados históricos do mercado financeiro</h1><div class=article-metadata><span class=article-date>Última atualização em
Jul 5, 2025</span>
<span class=middot-divider></span><span class=article-reading-time>8 minutos de leitura</span></div><div class="btn-links mb-3"></div></div><div class="article-header article-container featured-image-wrapper mt-4 mb-4" style=max-width:321px;max-height:321px><div style=position:relative><img src=/blog/2020/05/21/obtencao-e-manipulacao-de-dados-historicos-do-mercado-financeiro/featured.png alt class=featured-image></div></div><div class=article-container><div class=article-style><details class="toc-inpage d-print-none" open><summary class=font-weight-bold>Lista de Conteúdos</summary><nav id=TableOfContents><ul><li><a href=#introdução>Introdução</a></li><li><a href=#obtenção-e-manipulação-dos-dados>Obtenção e manipulação dos dados</a></li><li><a href=#visualização>Visualização</a></li></ul></nav></details><h2 id=introdução>Introdução</h2><p>A análise de dados históricos do mercado financeiro pode ser prática para diversos fins, como estudos acadêmicos, gerenciamento de portfólio, criação de conteúdo e outros.</p><p>Boa parte dos materiais por aí são baseados naqueles famosos aplicativos de planilha, nada contra, mas eu gosto mesmo de resolver os problemas propostos usando Python. Para isso, vamos usar dois pacotes:</p><ul><li><p><a href=https://github.com/ranaroussi/yfinance target=_blank rel=noopener>yfinance</a> oferece uma alternativa em Python para baixar dados históricos do mercado financeiro a partir do Yahoo! finanças;</p></li><li><p><a href=https://github.com/matplotlib/mplfinance target=_blank rel=noopener>mplfinance</a> é uma utilidade construída sobre Matplotlib, que oferece visualização e análise para dados financeiros.</p></li></ul><div class="alert alert-note"><div>Lembre-se sempre que lucros passados não são garantia de lucros futuros, e que esse post não é uma recomendação de compra.</div></div><p>O primeiro passo é instalar os pacotes que usaremos, e isso pode ser feito no ambiente Jupyter (como esse post) com o seguinte comando mágico:</p><pre><code class=language-python>!pip install -q yfinance mplfinance
</code></pre><p>E então importamos ambos para a nossa aplicação:</p><pre><code class=language-python>import yfinance as yf
import mplfinance as mpf
</code></pre><hr><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-9439284423075563 data-ad-slot=7484154417></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=obtenção-e-manipulação-dos-dados>Obtenção e manipulação dos dados</h2><p>O módulo <code>Ticker</code> nos permite o acesso a diversos dados de maneira integrada ao Python, e apenas para exemplificar, usaremos a Microsoft, código de negociação <code>MSFT</code>:</p><pre><code class=language-python>msft = yf.Ticker(&quot;MSFT&quot;)
</code></pre><p>Informações completas da companhia são obtidos com o método <code>info</code>, como segue:</p><pre><code class=language-python>msft.info
</code></pre><pre><code class=language-text>    {'zip': '98052-6399',
     'sector': 'Technology',
     'fullTimeEmployees': 163000,
     'longBusinessSummary': 'Microsoft Corporation develops, licenses, and supports software, services, devices, and solutions worldwide. Its Productivity and Business Processes segment offers Office, Exchange, SharePoint, Microsoft Teams, Office 365 Security and Compliance, and Skype for Business, as well as related Client Access Licenses (CAL); Skype, Outlook.com, and OneDrive; LinkedIn that includes Talent, Learning, Sales, and Marketing solutions, as well as premium subscriptions; and Dynamics 365, a set of cloud-based and on-premises business solutions for small and medium businesses, large organizations, and divisions of enterprises. Its Intelligent Cloud segment licenses SQL and Windows Servers, Visual Studio, System Center, and related CALs; GitHub that provides a collaboration platform and code hosting service for developers; and Azure, a cloud platform. It also offers support services and Microsoft consulting services to assist customers in developing, deploying, and managing Microsoft server and desktop solutions; and training and certification to developers and IT professionals on various Microsoft products. Its More Personal Computing segment provides Windows original equipment manufacturer (OEM) licensing and other non-volume licensing of the Windows operating system; Windows Commercial, such as volume licensing of the Windows operating system, Windows cloud services, and other Windows commercial offerings; patent licensing; Windows Internet of Things; and MSN advertising. It also offers Surface, PC accessories, PCs, tablets, gaming and entertainment consoles, and other intelligent devices; Gaming, including Xbox hardware, and Xbox content and services; video games and third-party video game royalties; and Search, including Bing and Microsoft advertising. It sells its products through OEMs, distributors, and resellers; and directly through digital marketplaces, online stores, and retail stores. The company was founded in 1975 and is headquartered in Redmond, Washington.',
     'city': 'Redmond',
     'phone': '425-882-8080',
     'state': 'WA',
     'country': 'United States',
     'companyOfficers': [],
     'website': 'http://www.microsoft.com',
     'maxAge': 1,
     'address1': 'One Microsoft Way',
     'industry': 'Software—Infrastructure',
     'previousClose': 219.66,
     'regularMarketOpen': 220.15,
     'twoHundredDayAverage': 196.80064,
     'trailingAnnualDividendYield': 0.00928708,
     'payoutRatio': 0.3455,
     'volume24Hr': None,
     'regularMarketDayHigh': 222.29,
     'navPrice': None,
     'averageDailyVolume10Day': 27025187,
     'totalAssets': None,
     'regularMarketPreviousClose': 219.66,
     'fiftyDayAverage': 212.05457,
     'trailingAnnualDividendRate': 2.04,
     'open': 220.15,
     'toCurrency': None,
     'averageVolume10days': 27025187,
     'expireDate': None,
     'yield': None,
     'algorithm': None,
     'dividendRate': 2.24,
     'exDividendDate': 1605657600,
     'beta': 0.923331,
     'circulatingSupply': None,
     'startDate': None,
     'regularMarketDayLow': 219.33,
     'priceHint': 2,
     'currency': 'USD',
     'trailingPE': 38.135414,
     'regularMarketVolume': 25074770,
     'lastMarket': None,
     'maxSupply': None,
     'openInterest': None,
     'marketCap': 1662310023168,
     'volumeAllCurrencies': None,
     'strikePrice': None,
     'averageVolume': 33866804,
     'priceToSalesTrailing12Months': 11.623326,
     'dayLow': 219.33,
     'ask': 219,
     'ytdReturn': None,
     'askSize': 1000,
     'volume': 25074770,
     'fiftyTwoWeekHigh': 232.86,
     'forwardPE': 29.967258,
     'fromCurrency': None,
     'fiveYearAvgDividendYield': 1.8,
     'fiftyTwoWeekLow': 132.52,
     'bid': 219,
     'tradeable': False,
     'dividendYield': 0.010199999,
     'bidSize': 1300,
     'dayHigh': 222.29,
     'exchange': 'NMS',
     'shortName': 'Microsoft Corporation',
     'longName': 'Microsoft Corporation',
     'exchangeTimezoneName': 'America/New_York',
     'exchangeTimezoneShortName': 'EDT',
     'isEsgPopulated': False,
     'gmtOffSetMilliseconds': '-14400000',
     'quoteType': 'EQUITY',
     'symbol': 'MSFT',
     'messageBoardId': 'finmb_21835',
     'market': 'us_market',
     'annualHoldingsTurnover': None,
     'enterpriseToRevenue': 11.243,
     'beta3Year': None,
     'profitMargins': 0.30962,
     'enterpriseToEbitda': 24.639,
     '52WeekChange': 0.59857357,
     'morningStarRiskRating': None,
     'forwardEps': 7.33,
     'revenueQuarterlyGrowth': None,
     'sharesOutstanding': 7567649792,
     'fundInceptionDate': None,
     'annualReportExpenseRatio': None,
     'bookValue': 15.626,
     'sharesShort': 39634230,
     'sharesPercentSharesOut': 0.0052,
     'fundFamily': None,
     'lastFiscalYearEnd': 1593475200,
     'heldPercentInstitutions': 0.74093,
     'netIncomeToCommon': 44280999936,
     'trailingEps': 5.76,
     'lastDividendValue': 0.51,
     'SandP52WeekChange': 0.16647923,
     'priceToBook': 14.057341,
     'heldPercentInsiders': 0.014249999,
     'nextFiscalYearEnd': 1656547200,
     'mostRecentQuarter': 1593475200,
     'shortRatio': 1.09,
     'sharesShortPreviousMonthDate': 1598832000,
     'floatShares': 7455727348,
     'enterpriseValue': 1607928643584,
     'threeYearAverageReturn': None,
     'lastSplitDate': 1045526400,
     'lastSplitFactor': '2:1',
     'legalType': None,
     'lastDividendDate': 1597795200,
     'morningStarOverallRating': None,
     'earningsQuarterlyGrowth': -0.151,
     'dateShortInterest': 1601424000,
     'pegRatio': 2.29,
     'lastCapGain': None,
     'shortPercentOfFloat': 0.0053,
     'sharesShortPriorMonth': 36458662,
     'category': None,
     'fiveYearAverageReturn': None,
     'regularMarketPrice': 220.15,
     'logo_url': 'https://logo.clearbit.com/microsoft.com'}
</code></pre><p>Pode-se obter informações sobre os principais acionistas:</p><pre><code class=language-python>msft.major_holders
</code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>0</th><th>1</th></tr></thead><tbody><tr><th>0</th><td>1.42%</td><td>% of Shares Held by All Insider</td></tr><tr><th>1</th><td>74.09%</td><td>% of Shares Held by Institutions</td></tr><tr><th>2</th><td>75.16%</td><td>% of Float Held by Institutions</td></tr><tr><th>3</th><td>4630</td><td>Number of Institutions Holding Shares</td></tr></tbody></table></div><pre><code class=language-python>msft.institutional_holders
</code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>Holder</th><th>Shares</th><th>Date Reported</th><th>% Out</th><th>Value</th></tr></thead><tbody><tr><th>0</th><td>Vanguard Group, Inc. (The)</td><td>632013255</td><td>2020-06-29</td><td>0.0835</td><td>128621017525</td></tr><tr><th>1</th><td>Blackrock Inc.</td><td>521841633</td><td>2020-06-29</td><td>0.0690</td><td>106199990731</td></tr><tr><th>2</th><td>State Street Corporation</td><td>314554694</td><td>2020-06-29</td><td>0.0416</td><td>64015025775</td></tr><tr><th>3</th><td>FMR, LLC</td><td>236873992</td><td>2020-06-29</td><td>0.0313</td><td>48206226111</td></tr><tr><th>4</th><td>Price (T.Rowe) Associates Inc</td><td>183090016</td><td>2020-06-29</td><td>0.0242</td><td>37260649156</td></tr><tr><th>5</th><td>Capital World Investors</td><td>122923512</td><td>2020-06-29</td><td>0.0162</td><td>25016163927</td></tr><tr><th>6</th><td>Geode Capital Management, LLC</td><td>116688974</td><td>2020-06-29</td><td>0.0154</td><td>23747373098</td></tr><tr><th>7</th><td>Capital International Investors</td><td>98209725</td><td>2020-06-29</td><td>0.0130</td><td>19986661134</td></tr><tr><th>8</th><td>Capital Research Global Investors</td><td>94081197</td><td>2020-06-29</td><td>0.0124</td><td>19146464401</td></tr><tr><th>9</th><td>Northern Trust Corporation</td><td>93331898</td><td>2020-06-29</td><td>0.0123</td><td>18993974561</td></tr></tbody></table></div><p>Os dados históricos são obtidos com o método <code>history()</code>, que aceita como argumentos o período desejado, ou datas de início e fim, e retorna um <a href=https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html target=_blank rel=noopener>Pandas <code>DataFrame</code></a> que contém os preços de abertura e fechamento do mercado, além de máximas e mínimas, o volume de negociação, informações sobre dividendos pagos e desdobramentos.</p><pre><code class=language-python>data = msft.history(period=&quot;max&quot;)
</code></pre><p>E assim, temos a disposição todos os métodos inerentes do <a href=https://pandas.pydata.org/ target=_blank rel=noopener>Pandas</a>, como <code>head()</code>, que nos mostra a parte superior da tabela de dados:</p><pre><code class=language-python>data.head()
</code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>Dividends</th><th>Stock Splits</th></tr><tr><th>Date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>1986-03-13</th><td>0.06</td><td>0.06</td><td>0.06</td><td>0.06</td><td>1031788800</td><td>0.0</td><td>0.0</td></tr><tr><th>1986-03-14</th><td>0.06</td><td>0.07</td><td>0.06</td><td>0.06</td><td>308160000</td><td>0.0</td><td>0.0</td></tr><tr><th>1986-03-17</th><td>0.06</td><td>0.07</td><td>0.06</td><td>0.07</td><td>133171200</td><td>0.0</td><td>0.0</td></tr><tr><th>1986-03-18</th><td>0.07</td><td>0.07</td><td>0.06</td><td>0.06</td><td>67766400</td><td>0.0</td><td>0.0</td></tr><tr><th>1986-03-19</th><td>0.06</td><td>0.06</td><td>0.06</td><td>0.06</td><td>47894400</td><td>0.0</td><td>0.0</td></tr></tbody></table></div><p>Ou <code>tail()</code>, que mostra a parte inferior:</p><pre><code class=language-python>data.tail()
</code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>Dividends</th><th>Stock Splits</th></tr><tr><th>Date</th><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><th>2020-10-12</th><td>218.79</td><td>223.86</td><td>216.81</td><td>221.40</td><td>40461400</td><td>0.0</td><td>0.0</td></tr><tr><th>2020-10-13</th><td>222.72</td><td>225.21</td><td>220.43</td><td>222.86</td><td>28950800</td><td>0.0</td><td>0.0</td></tr><tr><th>2020-10-14</th><td>223.00</td><td>224.22</td><td>219.13</td><td>220.86</td><td>23451700</td><td>0.0</td><td>0.0</td></tr><tr><th>2020-10-15</th><td>217.10</td><td>220.36</td><td>216.01</td><td>219.66</td><td>22718400</td><td>0.0</td><td>0.0</td></tr><tr><th>2020-10-16</th><td>220.15</td><td>222.29</td><td>219.33</td><td>219.66</td><td>25074770</td><td>0.0</td><td>0.0</td></tr></tbody></table></div><p>Podemos facilmente produzir um gráfico com o método <code>plot()</code>, conforme segue:</p><pre><code class=language-python>data.plot();
</code></pre><p><img src=figura_0.svg alt=svg></p><p>Essa figura ficou meio poluída visualmente, vamos nos concentrar apenas no preço de fechamento, e acrescentar algumas opções extras:</p><pre><code class=language-python># Acessamos apenas o preço de fechamento, plotamos com log no eixo y,
# porque é mais representativo, adicionamos um título à figura
data.Close.plot(logy=True, title=msft.info['symbol'])

# Aqui adicionamos médias móveis, porque não?
# mav vem do inglês para moving average
for mav in [500, 1000, 2000]:
  data.Close.rolling(mav).mean().plot(label=f'mav {mav}')

plt.legend();
</code></pre><p><img src=figura_1.svg alt=svg></p><p>Podemos também calcular e graficar a variação percentual diária do preço como:</p><pre><code class=language-python>data['Var [%]'] = 100. * (data.Close - data.Open) / data.Open

data['Var [%]'].plot();
</code></pre><p><img src=figura_2.svg alt=svg></p><p>Que pode ser exibida como um histograma de frequências:</p><pre><code class=language-python>data['Var [%]'].plot.hist(bins=100);
</code></pre><p><img src=figura_3.svg alt=svg></p><p>Temos ainda o método <code>actions()</code> que retorna dados históricos sobre dividendos e desdobramento das ações, e perceba que ele pode ser encadeado com o método <code>plot()</code>, para múltiplas operações em uma única linha de código:</p><pre><code class=language-python>msft.actions.plot();
</code></pre><p><img src=figura_4.svg alt=svg></p><p>O método <code>describe()</code> é particularmente útil para ter uma rápida representação de uma grande quantidade de dados, fornecendo a contagem, média, desvio padrão, valor mínimo, máximo e outros.</p><pre><code class=language-python>data.describe()
</code></pre><div><style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p><table border=1 class=dataframe><thead><tr style=text-align:right><th></th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>Dividends</th><th>Stock Splits</th><th>Var [%]</th></tr></thead><tbody><tr><th>count</th><td>8722.000000</td><td>8722.000000</td><td>8722.000000</td><td>8722.000000</td><td>8.722000e+03</td><td>8722.000000</td><td>8722.000000</td><td>8722.000000</td></tr><tr><th>mean</th><td>26.930644</td><td>27.217296</td><td>26.637444</td><td>26.937902</td><td>6.000501e+07</td><td>0.002196</td><td>0.001949</td><td>0.067909</td></tr><tr><th>std</th><td>37.001413</td><td>37.388700</td><td>36.589514</td><td>37.016185</td><td>3.867451e+07</td><td>0.040982</td><td>0.061015</td><td>2.052796</td></tr><tr><th>min</th><td>0.060000</td><td>0.060000</td><td>0.060000</td><td>0.060000</td><td>2.304000e+06</td><td>0.000000</td><td>0.000000</td><td>-25.925926</td></tr><tr><th>25%</th><td>2.360000</td><td>2.380000</td><td>2.330000</td><td>2.362500</td><td>3.617535e+07</td><td>0.000000</td><td>0.000000</td><td>-0.781170</td></tr><tr><th>50%</th><td>18.595000</td><td>18.805000</td><td>18.360000</td><td>18.590000</td><td>5.316930e+07</td><td>0.000000</td><td>0.000000</td><td>0.000000</td></tr><tr><th>75%</th><td>26.267500</td><td>26.487500</td><td>25.925000</td><td>26.225000</td><td>7.371192e+07</td><td>0.000000</td><td>0.000000</td><td>0.889940</td></tr><tr><th>max</th><td>229.270000</td><td>232.860000</td><td>227.350000</td><td>231.650000</td><td>1.031789e+09</td><td>3.080000</td><td>2.000000</td><td>16.666667</td></tr></tbody></table></div><p>Esse foi nosso exemplo, informações complementares podem ser encontradas no <a href=https://aroussi.com/post/python-yahoo-finance target=_blank rel=noopener>post</a> do autor original do pacote <code>yfinance</code>. Experimente executar os exemplos propostos para outros códigos de negociação, por exemplo com o índice <a href=https://pt.wikipedia.org/wiki/S%26P_500 target=_blank rel=noopener>S&P 500</a> com o ticker <code>^GSPC</code>, o índice <a href=http://www.b3.com.br/pt_br/market-data-e-indices/indices/indices-amplos/ibovespa.htm target=_blank rel=noopener>Ibovespa</a> com o ticker <code>^BVSP</code>, ou empresas brasileiras, como o ticker <code>ITUB3.SA</code>, e muitos outros.</p><hr><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-9439284423075563 data-ad-slot=7484154417></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=visualização>Visualização</h2><p>A representação gráfica de dados financeiros é mais usual pelo método <a href=https://pt.wikipedia.org/wiki/Candlestick target=_blank rel=noopener>Candlestick</a>, onde exibe-se os preços de abertura, fechamento, máximo e mínimo de maneira mais compreensiva.</p><p>Vamos mudar os dados empregados apenas para ter um segundo exemplo da utilização do <code>yfinance</code>, agora especificando uma data de início e fim para a série histórica, e agrupando os resultados no período de uma semana.</p><pre><code class=language-python>data = yf.Ticker('^BVSP').history(start='2019-01-01', end='2019-12-31', interval='1wk')
</code></pre><p>E agora com <code>mplfinance</code> e apenas uma linha de código, temos a nossa figura:</p><pre><code class=language-python>mpf.plot(data, type='candle',
         mav=(5,10), volume=True,
         show_nontrading=True, style='yahoo',
         title='Ibovespa, 2019');
</code></pre><p><img src=figura_6.svg alt=svg></p><p>Bem mais limpa visualmente do que a nossa primeira tentativa, não é mesmo? Perceba que o método aceita diferentes tipos de gráfico, a inclusão de médias móveis (<code>mav</code>), o volume de negociações (pode mostrar, ou não), os dias em que não houveram pregão, e pode-se escolher o estilo do gráfico. Informações completas sobre o pacote <code>mplfinance</code> estão disponíveis no <a href=https://pypi.org/project/mplfinance/ target=_blank rel=noopener>link</a>.</p></div><p class=edit-page><a href=https://github.com/fschuch/fschuch.com/edit/master/content/post/2020-dados-do-mercado-financeiro/index.pt.md><i class="fas fa-pen pr-2"></i>Edit this page</a></p><div class=article-tags><a class="badge badge-light" href=/tag/matematica-financeira/>Matemática Financeira</a>
<a class="badge badge-light" href=/tag/pandas/>Pandas</a>
<a class="badge badge-light" href=/tag/matplotlib/>Matplotlib</a>
<a class="badge badge-light" href=/tag/python/>Python</a></div><div class="media author-card content-widget-hr"><a href=https://www.fschuch.com/><img class="avatar mr-3 avatar-circle" src=/author/felipe-n.-schuch/avatar_hu8ccf1005bffbd7f5e7f26c831ac988b4_62426_270x270_fill_q90_lanczos_center.jpg alt="Felipe N. Schuch"></a><div class=media-body><h5 class=card-title><a href=https://www.fschuch.com/>Felipe N. Schuch</a></h5><h6 class=card-subtitle>Application Engineer</h6><p class=card-text>Possuo experiência na aplicação e também no desenvolvimento de ferramentas computacionais capazes de resolver problemas complexos, além de realizar o processamento, visualização e comunicação dos dados produzidos por essas soluções.</p><ul class=network-icon aria-hidden=true><li><a href=mailto:me@fschuch.com><i class="fas fa-envelope"></i></a></li><li><a href=https://www.linkedin.com/in/fschuch/ target=_blank rel=noopener><i class="fab fa-linkedin"></i></a></li><li><a href=https://github.com/fschuch target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a href=https://twitter.com/fschuch target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li></ul></div></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Próximo</div><a href=/blog/2020/06/05/conducao-de-calor-transiente-bidimensional/ rel=next>Condução de Calor Transiente Bidimensional</a></div><div class=post-nav-item><div class=meta-nav>Anterior</div><a href=/blog/2020/04/23/obtencao-da-previsao-do-tempo-com-o-pacote-pyowm/ rel=prev>Obtenção da previsão do tempo com o pacote PyOWM</a></div></div></div><div class="article-widget content-widget-hr"><h3>Relacionados</h3><ul><li><a href=/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/>Jupyter Notebook como uma Poderosa Ferramenta Educacional</a></li><li><a href=/talk/metodos-numericos-aplicados-a-transferencia-de-calor/>Métodos Numéricos Aplicados à Transferência de Calor</a></li><li><a href=/talk/python-introducao-e-aplicacoes-da-linguagem-de-programacao-em-engenharia/>Python: Introdução e Aplicações da Linguagem de Programação em Engenharia</a></li><li><a href=/blog/2020/04/11/alugar-economizar-e-pagar-a-vista-ou-financiar-um-imovel-um-estudo-de-caso/>Alugar, economizar e pagar à vista ou financiar um imóvel? Um estudo de caso</a></li><li><a href=/talk/acelerando-a-exploracao-de-dados-multidimensionais-com-xarray/>Acelerando a exploração de dados multidimensionais com Xarray</a></li></ul></div></div></article></div><div class=page-footer><div class=container><footer class=site-footer><script data-ad-client=ca-pub-9439284423075563 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><p class=powered-by>© 2020-2025 Felipe N. Schuch</p><p class="powered-by copyright-license-text">All content is licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0 rel="noopener noreferrer" target=_blank>CC BY SA 4.0</a></p><p class="powered-by footer-license-icons"><a href=https://creativecommons.org/licenses/by-sa/4.0 rel="noopener noreferrer" target=_blank aria-label="Creative Commons"><i class="fab fa-creative-commons fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-by fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-sa fa-2x" aria-hidden=true></i></a></p><p class=powered-by>Published with
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic Website Builder</a>
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Citação</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copiar</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.4/mermaid.min.js integrity="sha512-as1BF4+iHZ3BVO6LLDQ7zrbvTXM+c/1iZ1qII/c3c4L8Rn5tHLpFUtpaEtBNS92f+xGsCzsD7b62XP3XYap6oA==" crossorigin=anonymous title=mermaid></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/bash.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/diff.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/fortran.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/makefile.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/markdown.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/lua.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js></script><script id=search-hit-fuse-template type=text/x-template>
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js></script><script src=/pt/js/wowchemy.min.5eedfaf253f2d60589868ae11b902a4a.js></script></body></html>