<!doctype html><html lang=pt-br><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.1.0 for Hugo"><meta name=author content="Felipe N. Schuch"><meta name=description content="Mais um desafio de programação. Temos a tarefa de encontrar um anagrama dentre as palavras da língua portuguesa, e claro, aprender muitos conceitos de programação em Python enquanto resolvemos o problema."><link rel=alternate hreflang=pt-br href=https://www.fschuch.com/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#3f51b5"><script src=/js/mathjax-config.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/atom-one-light.min.css crossorigin=anonymous title=hl-light media=print onload="this.media='all'"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/atom-one-light.min.css crossorigin=anonymous title=hl-dark media=print onload="this.media='all'" disabled><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media=print onload="this.media='all'"><link rel=stylesheet href=/css/wowchemy.304d0419c2aa44a04e284fe6adec1562.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-177068857-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}function trackOutboundLink(a,b){gtag('event','click',{event_category:'outbound',event_label:a,transport_type:'beacon',event_callback:function(){b!=='_blank'&&(document.location=a)}}),console.debug("Outbound link clicked: "+a)}function onClickCallback(a){if(a.target.tagName!=='A'||a.target.host===window.location.host)return;trackOutboundLink(a.target,a.target.getAttribute('target'))}gtag('js',new Date),gtag('config','UA-177068857-1',{anonymize_ip:!0}),gtag('set',{cookie_flags:'SameSite=None;Secure'}),document.addEventListener('click',onClickCallback,!1)</script><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/media/icon_hu25d0b20bf2bf90ac27c6cbd6ce22358d_22074_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/media/icon_hu25d0b20bf2bf90ac27c6cbd6ce22358d_22074_180x180_fill_lanczos_center_2.png><link rel=canonical href=https://www.fschuch.com/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@fschuch"><meta property="twitter:creator" content="@fschuch"><meta property="og:site_name" content="F. Schuch"><meta property="og:url" content="https://www.fschuch.com/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/"><meta property="og:title" content="Desafio de Programação: Encontre o Anagrama | F. Schuch"><meta property="og:description" content="Mais um desafio de programação. Temos a tarefa de encontrar um anagrama dentre as palavras da língua portuguesa, e claro, aprender muitos conceitos de programação em Python enquanto resolvemos o problema."><meta property="og:image" content="https://www.fschuch.com/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/featured.jpg"><meta property="twitter:image" content="https://www.fschuch.com/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/featured.jpg"><meta property="og:locale" content="pt-br"><meta property="article:published_time" content="2021-03-16T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-01T18:32:07-03:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.fschuch.com/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/"},"headline":"Desafio de Programação: Encontre o Anagrama","image":["https://www.fschuch.com/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/featured.jpg"],"datePublished":"2021-03-16T00:00:00Z","dateModified":"2024-03-01T18:32:07-03:00","author":{"@type":"Person","name":"Felipe N. Schuch"},"publisher":{"@type":"Organization","name":"F. Schuch","logo":{"@type":"ImageObject","url":"https://www.fschuch.com/media/icon_hu25d0b20bf2bf90ac27c6cbd6ce22358d_22074_192x192_fill_lanczos_center_2.png"}},"description":"Mais um desafio de programação. Temos a tarefa de encontrar um anagrama dentre as palavras da língua portuguesa, e claro, aprender muitos conceitos de programação em Python enquanto resolvemos o problema."}</script><script src=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.js integrity="sha256-5VhCqFam2Cn+yjw61zbBNrbHVJ6SRydPeKopYlngbiQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.1/cookieconsent.min.css integrity="sha256-zQ0LblD/Af8vOppw18+2anxsuaz3pWYyVWi+bTvTH8Q=" crossorigin=anonymous><script>window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#3f51b5",text:"rgb(255, 255, 255)"},button:{background:"rgb(255, 255, 255)",text:"#3f51b5"}},theme:"classic",content:{message:"Este site contém cookies para garantir que você tenha a melhor experência.",dismiss:"Entendi!",link:"Saiba mais",href:"https://www.cookiesandyou.com"}})})</script><title>Desafio de Programação: Encontre o Anagrama | F. Schuch</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=b88988670a7cf17c2c3f7d55013b27b3><script src=/js/wowchemy-init.min.f16be01fc8fb2b5885dd67ce942d1185.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Pesquisar</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Pesquisar... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Pesquisar...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class=page-header><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>F. Schuch</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Alterar navegação">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>F. Schuch</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Sobre</span></a></li><li class=nav-item><a class=nav-link href=/#posts><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projetos</span></a></li><li class=nav-item><a class=nav-link href=/#featured><span>Publicações</span></a></li><li class=nav-item><a class=nav-link href=/#events><span>Palestras</span></a></li><li class=nav-item><a class=nav-link href=/#contact><span>Contato</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Pesquisar><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true aria-label="Display preferences"><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav></div><div class=page-body><article class=article><div class="article-container pt-3"><h1>Desafio de Programação: Encontre o Anagrama</h1><div class=article-metadata><span class=article-date>Última atualização em
Mar 1, 2024</span>
<span class=middot-divider></span><span class=article-reading-time>11 minutos de leitura</span></div><div class="btn-links mb-3"></div></div><div class="article-header article-container featured-image-wrapper mt-4 mb-4" style=max-width:720px;max-height:514px><div style=position:relative><img src=/blog/2021/03/16/desafio-de-programacao-encontre-o-anagrama/featured_hu3d03a01dcc18bc5be0e67db3d8d209a6_377568_720x0_resize_q90_lanczos.jpg alt class=featured-image></div></div><div class=article-container><div class=article-style><details class="toc-inpage d-print-none" open><summary class=font-weight-bold>Lista de Conteúdos</summary><nav id=TableOfContents><ul><li><a href=#introdução>Introdução</a></li><li><a href=#metodologia>Metodologia</a><ul><li><a href=#normalizar>Normalizar</a></li><li><a href=#inspecionar>Inspecionar</a></li><li><a href=#testar>Testar</a></li><li><a href=#obter-lista-de-palavras>Obter Lista de Palavras</a></li><li><a href=#extrair-opções-válidas>Extrair Opções Válidas</a></li></ul></li><li><a href=#resultados>Resultados</a></li><li><a href=#conclusão>Conclusão</a></li></ul></nav></details><h2 id=introdução>Introdução</h2><p>Solucionar problemas é uma questão de prática. É claro que livros, cursos e vídeos são ótimos materiais complementares para melhorar a sua técnica, mas não há como realmente fixar o conhecimento se você não colocar a mão na massa. Mas mesmo compreendendo que devemos praticar, as vezes nos deparamos com outro ponto: Que problema vou resolver para praticar? Temos que prestar atenção, porque os problemas aparecem por todos os lados, e cada problema resolvido nos torna programadores melhores.</p><p>Com isso surge esse desafio que eu propus lá no <a href=https://www.instagram.com/aprenda.py/ target=_blank rel=noopener>Intagram @aprenda.py</a>: Você consegue programar uma solução em Python que encontre uma palavra na língua portuguesa que seja um anagrama para <em>eugenie gut zaza</em>?</p><p>Mas primeiro, vamos à definição do problema: Anagrama é um tipo de jogo de palavras, onde a reorganização das letras de uma palavra ou expressão resulta na obtenção de outras palavras ou expressões. Temos por exemplo <em>Iracema</em> e <em>América</em>, ou então <em>Ator</em> e <em>Rota</em>:</p><pre><code class=language-mermaid>graph LR
    subgraph Rota
        R1(R) --- O1(O) --- T1(T) --- A1(A)
    end

    subgraph Ator
        A2(A) --- T2(T) --- O2(O) --- R2(R)
    end

    A2 -.-&gt; A1
    T2 -.-&gt; T1
    O2 -.-&gt; O1
    R2 -.-&gt; R1
</code></pre><p>Agora que sabemos o que são anagramas, vamos ao próximo ponto, como é que encontramos eles para resolvermos a questão proposta?
A prática em resolução de problemas mostra que o ideal é começarmos estabelecendo um passo a passo, dividindo o problema em parcelas menores, a assim termos uma ideia clara sobre como prosseguir até o objetivo, vejamos:</p><ul><li>Devemos procurar uma maneira de <em>normalizar</em> as palavras ou expressões com as quais estamos trabalhando, para facilitar a comparação entre elas. Podemos listar as seguintes operações:<ul><li>Normalizar acentos e caracteres especiais;</li><li>Remover espaços em branco;</li><li>Transformar caracteres que porventura esteja em caixa alta, para caixa baixa;</li></ul></li><li>Então, temos que <em>inspecionar</em> uma palavra ou expressão, e para caracteriza-las, obtendo uma listagem das letras e da sua contagem;</li><li>Com isso, definimos um método para efetivamente <em>testar</em> se duas palavras ou expressões são anagramas entre si;</li><li>Precisamos <em>obter</em> uma lista de palavras válidas na língua portuguesa para testar contra a nossa referência;</li><li>Por fim, precisamos <em>extrair</em> dessa lista todas as palavras que satisfazem o problema.</li></ul><p>Já sabemos como proceder, agora, te convido a praticar e tentar resolver o problema.
Mas de qualquer maneira, a seguir temos a solução completa e comentada.</p><hr><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-9439284423075563 data-ad-slot=7484154417></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=metodologia>Metodologia</h2><p>Como passo inicial, pode ser necessário instalar algumas das bibliotecas Python que vamos utilizar. Duas delas merecem destaque, <a href=https://pypi.org/project/beautifulsoup4/ target=_blank rel=noopener>beautifulsoup4</a> é uma ferramenta para Web Scraping, com ela vamos obter as palavras válidas de um site de terceiros, e <a href=https://pypi.org/project/Unidecode/ target=_blank rel=noopener>unidecode</a> será útil para a normalização das variáveis tipo <code>str</code> que usaremos nessa solução. Ambos pacotes podem ser instalados com a seguinte linha de comando:</p><pre><code class=language-bash>pip install beautifulsoup4 Unidecode
</code></pre><p>Agora partimos para nossa aplicação Python própriamente dita, começamos com as importações:</p><pre><code class=language-python>import os.path
import time
from collections import Counter

import requests
from bs4 import BeautifulSoup
from unidecode import unidecode
</code></pre><h3 id=normalizar>Normalizar</h3><p>Nós podemos deixar nossa solução mais robusta ao trabalhar com texto, se definirmos uma maneira de normalizar as palavras com as quais vamos lidar. Com <a href=https://pypi.org/project/Unidecode/ target=_blank rel=noopener>unidecode</a>, vamos remover acentos e caracteres especiais, por exemplo, <code>ç</code> será transformado em <code>c</code>, <code>ã</code> será simplesmente <code>a</code>, e assim por diante. A operação seguinte é remover os espaços, para isso, temos o método <code>replace()</code> das strings, que irá substituir cada espaço <code>" "</code> por um caractere vazio <code>""</code>. Por fim, o método <code>lower()</code> converte todos os caracteres para caixa baixa, garantindo que nossa aplicação não seja sensível quanto à presença de letras maiúsculas e minúsculas. Tudo isso é feito com a seguinte função:</p><pre><code class=language-python>def normalizar_palavra(palavra: str) -&gt; str:
    return unidecode(palavra).replace(&quot; &quot;, &quot;&quot;).lower()
</code></pre><p>Vamos testar nossa normalização com a frase:</p><pre><code class=language-python>normalizar_palavra(&quot;Canção da América&quot;)
</code></pre><pre><code>    'cancaodaamerica'
</code></pre><h3 id=inspecionar>Inspecionar</h3><p>Segundo passo, definimos como <em>inspecionar</em> a tarefa de obter um conjunto com as letras únicas que constituem uma palavra ou expressão, bem como a contagem de aparições de cada letra. Quando falamos em conjuntos de <em>chave</em> (cada caractere que compõem a palavra) e <em>valor</em> (o número de ocorrências), é natural pensar na utilização de um <a href=https://docs.python.org/3/tutorial/datastructures.html#dictionaries target=_blank rel=noopener>dicionário</a> Python.
Mas podemos ir um passo além se lembrarmos que Python tem embutido o módulo <a href=https://docs.python.org/3/library/collections.html#module-collections target=_blank rel=noopener>collections</a>, com estruturas de dados especializadas em certas tarefas, e o dicionário com contagem é uma dessas estruturas, chama-se <a href=https://docs.python.org/3/library/collections.html#collections.Counter target=_blank rel=noopener>Counter</a>.
Com essa classe especializada, veremos que podemos resolver o problema com menos linhas de código, melhor legibilidade, e menos propensão a erros.
O que definimos como <em>inspecionar</em> será obtido ao enviar uma palavra de entrada <em>normalizada</em> para o estrutura <code>Counter</code>, o código é como segue:</p><pre><code class=language-python>def inspecionar_palavra(palavra: str) -&gt; Counter:
    return Counter(normalizar_palavra(palavra))
</code></pre><p>Hora de testar a nossa implementação:</p><pre><code class=language-python>inspecionar_palavra(&quot;Aprenda Python&quot;)
</code></pre><pre><code class=language-text>Counter({'a': 2,
        'p': 2,
        'r': 1,
        'e': 1,
        'n': 2,
        'd': 1,
        'y': 1,
        't': 1,
        'h': 1,
        'o': 1})
</code></pre><pre><code class=language-python>inspecionar_palavra(&quot;eugenie gut zaza&quot;)
</code></pre><pre><code class=language-text>Counter({'e': 3, 'u': 2, 'g': 2, 'n': 1, 'i': 1, 't': 1, 'z': 2, 'a': 2})
</code></pre><h3 id=testar>Testar</h3><p>Terceiro passo, dadas duas palavras ou expressões, devemos testar se são anagramas (retornando <code>True</code>) ou não (retornando <code>False</code>). Estabelecemos três critérios para isso:</p><ul><li>Ambas entradas devem ter o mesmo número total de letras únicas, que pode ser testado por meio da função <a href=https://docs.python.org/3/library/functions.html#len target=_blank rel=noopener>len()</a>;</li><li>Sendo satisfeito o critério anterior, ambas entradas devem ser constituídas pelo mesmo conjunto de letras únicas. Como esses valores estão armazenados como as chaves do nosso dicionário, obtemos eles com o método <code>keys()</code>;</li><li>Então, comparamos que a contagem de cada uma das letras é igual entre as duas entradas. Como a contagem é armazenada nos valores dos dicionários, obtemos com o método <code>values()</code>.</li></ul><p>Se as três condições acima forem satisfeitas, teremos um resultado positivo para anagrama.
Acontece que estamos utilizando a estrutura especializada <a href=https://docs.python.org/3/library/collections.html#collections.Counter target=_blank rel=noopener>Counter</a>, e aqui vemos as vantagens de estudar e conhecer as peculiaridades dos módulos embutidos em Python.
Realizamos os três testes ao comparar se ambos contadores são iguais, todo o resto já está implementado na classe <code>Counter</code>.
Veja como fica o código:</p><pre><code class=language-python>def testa_se_anagrama(inspecionada_1: Counter, inspecionada_2: Counter) -&gt; bool:
    return inspecionada_1 == inspecionada_2
</code></pre><p>Vamos testar com três exemplos:</p><pre><code class=language-python>testa_se_anagrama(
    inspecionar_palavra(&quot;Roma&quot;), inspecionar_palavra(&quot;amor&quot;),
)
</code></pre><pre><code>True
</code></pre><pre><code class=language-python>testa_se_anagrama(
    inspecionar_palavra(&quot;Iracema&quot;), inspecionar_palavra(&quot;América&quot;),
)
</code></pre><pre><code>True
</code></pre><pre><code class=language-python>testa_se_anagrama(
    inspecionar_palavra(&quot;Python&quot;), inspecionar_palavra(&quot;Fortran&quot;),
)
</code></pre><pre><code>False
</code></pre><p>Note que a operação <code>inspecionar_palavra</code> poderia ter sido executada dentro de <code>testa_se_anagrama</code>, mas minha opção foi por não fazê-lo. Como nosso problema proposto envolve testar uma mesma palavra de referência contra uma lista de outras opções, podemos inspecionar a palavra de referências apenas umas vez e aproveitar esse valor nas demais comparações. Veremos mais detalhes sobre isso nos próximos tópicos.</p><h3 id=obter-lista-de-palavras>Obter Lista de Palavras</h3><p>Quarto passo, temos que obter uma lista de palavras válidas na qual vamos buscar por anagramas. Aqui existe uma série de caminhos para serem seguidos, e algumas decisões a serem tomadas, dependendo das características do problema.
Certamente, podemos começar recorrendo a uma ferramenta de busca sobre como conseguir uma lista de palavras na língua portuguesa dentro de nossa aplicação Python, mas devo dizer que não encontrei nada satisfatório em termos de custo (o tempo que eu levaria para implementar a solução) e benefício (solucionar o problema sem acrescentar demasiada complexidade).</p><p>Em um segundo momento, procurei por sites com dicionários online, e foi aí que encontrei <a href=https://www.dicio.com.br target=_blank rel=noopener>dicio.com.br</a>.
Vi dois pontos fortes no site, eu poderia pesquisar por palavras que começam com uma certa letra, além de poder restringir a busca para o número de letras na palavra.
Veja que para o problema que queremos resolver, estamos procurando por palavras que comecem com <code>a</code>, <code>e</code>, <code>g</code>, <code>i</code>, <code>n</code>, <code>t</code>, <code>u</code> e <code>z</code>, para um total de <code>14</code> letras, e isso reduz drasticamente a nossa busca pela resposta.</p><p>Então veio a primeira opção do design da solução, eu pude visitar as 8 páginas do site, uma para cada letra, copiar e colar as listas de palavras e ter rapidamente um protótipo que de fato resolveu o problema. Obtive uma lista com 2010 palavras, e, felizmente, a solução estava entre elas. Em seguida eu pensei, essa é uma chance para mim praticar algo novo, como eu posso automatizar esse processo?</p><p>E aqui entre o Web Scraping com o pacote <a href=https://pypi.org/project/beautifulsoup4/ target=_blank rel=noopener>beautifulsoup4</a>, podemos vasculhar o site automaticamente em busca da informação que precisamos. Começamos requisitando a página para nossa aplicação, por exemplo, começando com a letra <code>z</code>:</p><pre><code class=language-python>page = requests.get(&quot;https://www.dicio.com.br/palavras-comecam-z-com-14-letras/&quot;)
</code></pre><p>Em seguida, podemos analisar mais detalhadamente os elementos da página com:</p><pre><code class=language-python>soup = BeautifulSoup(page.content, &quot;html.parser&quot;)
</code></pre><p>E é uma verdadeira sopa de letrinhas, você pode imprimir na tela para testar com <code>print(soup)</code>, mas o código é muito grande, não ficaria bem no blog, assim preferi não inclui-lo.
Dentro de todo esse código HTML, precisamos encontrar o trecho de informação que nos interessa, e esse é um trabalho bem específico, pois cada site ou página tem sua própria estrutura e tags HTML.
Então, por pura especificidade do site que estamos usando como referência, encontrei o que procuramos com na localidade <code>soup.find_all("p")[1]</code>, além de encadear o retorno com <code>get_text()</code> como remover todas as tags e aumentar a legibilidade, <code>strip()</code> para remover espaçamentos extras e <code>split()</code> para quebrar o texto nos espaçamentos, a assim obtemos uma listagem das palavras válidas.
Veja o exemplo:</p><pre><code class=language-python>soup.find_all(&quot;p&quot;)[1].get_text(separator=&quot; &quot;).strip().split()
</code></pre><pre><code>['ziguezagueante',
 'zooterapêutica',
 'zeugobrânquios',
 'zooterapêutico',
 'zoofitantráceo',
 'zigomatolabial',
 'zoocorográfico',
 'zooiatrológico',
 'zoologicamente']
</code></pre><p>O exemplo com a letra <code>z</code> funcionou satisfatoriamente, agora é hora de construírmos uma função que retorne para qualquer letra inicial, além do número de letras desejado na palavra.
Mas antes de irmos ao código, vejamos algumas boas práticas sobre Web Scraping,
lembre-se que estamos consumindo informações do servidor de um terceiro, e não queremos ser rudes e sobrecarregar o serviço.
Então uma das ações do nosso código é sempre salvar para o nosso disco local as listas de palavras para uma dada letra inicial e números de palavras, assim, se solicitarmos a mesma lista, não precisamos de um novo acesso ao site externo, podemos simplesmente carregar nossa cópia local. Um outro cuidado foi implementar um intervalo de 2 segundos entre solicitações, para evitarmos qualquer problema com sobrecarga.
Por fim, vale lembrar que esse método é restrito às características construtivas da URL e do código HTML, e vai parar de funcionar caso algum desses itens seja alterado pelos desenvolvedores do site. Por isso, sempre que possível, verifique se o serviço oferece alguma <a href=https://pt.wikipedia.org/wiki/Interface_de_programa%C3%A7%C3%A3o_de_aplica%C3%A7%C3%B5es target=_blank rel=noopener>API</a> para acesso, o que tende a ser mais robusto tanto para quem envia às informações, quanto para quem às consome.</p><p><strong>Nota:</strong> O site que estamos usando para obter palavras válidas (<a href=https://www.dicio.com.br target=_blank rel=noopener>dicio.com.br</a>) limita o retorno em mil ocorrências para cada letra inicial, significando que nossa solução não cobrirá necessariamente todas as possibilidades da língua portuguesa, mas ainda assim, acho bastante satisfatório para esse estudo de caso.</p><p>Finalmente veja como ficou nossa função:</p><pre><code class=language-python>def obtem_as_palavras_possiveis(primeira_letra: str, numero_de_letras: int) -&gt; list:
    def verifica_se_arquivo_existe(nome_do_arquivo: str) -&gt; bool:
        return os.path.isfile(nome_do_arquivo)

    def leia_o_arquivo(nome_do_arquivo: str) -&gt; str:
        with open(nome_do_arquivo, &quot;r&quot;) as file_in:
            texto = file_in.read()
        return texto

    def escreva_o_arquivo(nome_do_arquivo: str, conteudo: str) -&gt; None:
        with open(nome_do_arquivo, &quot;w&quot;) as file_out:
            file_out.write(conteudo)

    palavras_alvo = f&quot;palavras-comecam-{primeira_letra}-com-{numero_de_letras}-letras&quot;
    arquivo_backup = palavras_alvo + &quot;.txt&quot;

    # Se o arquivo existe, carregue do disco
    if verifica_se_arquivo_existe(arquivo_backup):
        lista_de_palavras = leia_o_arquivo(arquivo_backup)
    # Senão, obtenha as palavras e salve o arquivo para o disco
    # para que possa ser utilizado da próxima vez
    else:
        page = requests.get(f&quot;https://www.dicio.com.br/{palavras_alvo}/&quot;)
        soup = BeautifulSoup(page.content, &quot;html.parser&quot;)
        lista_de_palavras = soup.find_all(&quot;p&quot;)[1].get_text(separator=&quot; &quot;).strip()
        escreva_o_arquivo(arquivo_backup, lista_de_palavras)
        time.sleep(2)

    return map(normalizar_palavra, lista_de_palavras.split())
</code></pre><p>Um teste de funcionalidade:</p><pre><code class=language-python>list(obtem_as_palavras_possiveis(&quot;z&quot;, 14))
</code></pre><pre><code>['ziguezagueante',
 'zooterapeutica',
 'zeugobranquios',
 'zooterapeutico',
 'zoofitantraceo',
 'zigomatolabial',
 'zoocorografico',
 'zooiatrologico',
 'zoologicamente']
</code></pre><h3 id=extrair-opções-válidas>Extrair Opções Válidas</h3><p>Chegamos ao último passo que estabelecemos para a resolução do nosso problema, dada uma lista contendo inúmeras palavras, devemos encontrar aquelas que são anagramas de uma certa palavra ou expressão de referência. Isso envolve ainda alguns sub-passos utilizando todas as funções que construímos anteriormente:</p><ul><li>Dada uma <code>palavra_referencia</code>, realizamos a <em>inspessão</em> e armazenamos essa informação;</li><li>Precisamos obter as listas de possibilidades válidas, mas lembre-se que podemos limitar o conjunto onde procuramos pela solução se lembrarmos que:<ul><li>Usamos apenas aquelas que comecem com alguma letra que realmente faça parte de <code>palavra_referencia</code>;</li><li>E apenas para aquelas que tenham o mesmo número de caracteres (descontando espaços) que <code>palavra_referencia</code>;</li></ul></li><li>Por fim, dados todos os elementos em <code>lista_possibilidades</code>, precisamos filtrar aqueles elementos que sejam anagramas de <code>palavra_referencia</code>, a para tanto, usamos a função Python <a href=https://docs.python.org/3/library/functions.html#filter target=_blank rel=noopener>filter</a>.
Note que <code>filter</code> retorna um iterável, então o transformamos para uma lista para a visualização completa da resposta.</li></ul><p>Vamos ao código:</p><pre><code class=language-python>def procurar_anagrama(palavra_referencia: str) -&gt; list:
    def compara_contra_alvo(palavra_alvo: str) -&gt; bool:
        return testa_se_anagrama(
            referencia_inspecionada, inspecionar_palavra(palavra_alvo),
        )

    referencia_inspecionada = inspecionar_palavra(palavra_referencia)
    letras_na_referencia = referencia_inspecionada.keys()
    len_referencia = sum(referencia_inspecionada.values())

    lista_possibilidades = []
    for letra in letras_na_referencia:
        lista_possibilidades.extend(obtem_as_palavras_possiveis(letra, len_referencia))

    print(f&quot;Testando anagrama contra {len(lista_possibilidades)} possibilidades&quot;)
    return list(filter(compara_contra_alvo, lista_possibilidades))
</code></pre><hr><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-9439284423075563 data-ad-slot=7484154417></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=resultados>Resultados</h2><p>Chegamos ao momento tão aguardado. Após programar uma função para cada passo que estabelecemos para resolver o problema, é hora de conferir a solução. Sem mais delongas, vamos à ela:</p><pre><code class=language-python>procurar_anagrama(&quot;eugenie gut zaza&quot;)
</code></pre><pre><code>Testando anagrama contra 2010 possibilidades
['ziguezagueante']
</code></pre><p>Legal, não? <code>ziguezagueante</code> é a nossa resposta, você conseguiu achar essa solução na sua própria implementação?</p><p>Mas depois de tantas linhas de código, não vamos nos ater somente a isso, vamos ver três testes extras:</p><pre><code class=language-python>procurar_anagrama(&quot;Roma&quot;)
</code></pre><pre><code>Testando anagrama contra 632 possibilidades
['amor', 'mora', 'moar', 'maro', 'ramo', 'roma']
</code></pre><pre><code class=language-python>procurar_anagrama(&quot;Aprenda&quot;)
</code></pre><pre><code>Testando anagrama contra 5078 possibilidades
['pernada', 'pandear']
</code></pre><pre><code class=language-python>procurar_anagrama(&quot;Python&quot;)
</code></pre><pre><code>Testando anagrama contra 1005 possibilidades
[]
</code></pre><h2 id=conclusão>Conclusão</h2><p>Incrível como o que parecia uma proposta que parecia não ser tão complicada pode nos proporcionar em termos de aprendizado quando nos comprometemos à resolver o problema.
E esse conhecimento acumulado vai sem dúvida contribuir para as próximas soluções que precisarmos resolver no futuro.
Mesmo já trabalhando com Python por algum tempo, encontrei nesse exercício a chance de praticar alguns conceitos de design de código de uns livros que tenho lido recentemente, além de usar estruturas especializadas como o <code>Counter</code>, bem como foi a primeira vez que usei web scraping em um projeto real.</p></div><p class=edit-page><a href=https://github.com/fschuch/fschuch.com/edit/master/content/post/2021-anagrama/index.pt.md><i class="fas fa-pen pr-2"></i>Edit this page</a></p><div class=article-tags><a class="badge badge-light" href=/tag/desafio/>Desafio</a>
<a class="badge badge-light" href=/tag/web-scraping/>Web Scraping</a>
<a class="badge badge-light" href=/tag/python/>Python</a>
<a class="badge badge-light" href=/tag/collections/>Collections</a></div><div class="media author-card content-widget-hr"><a href=https://www.fschuch.com/><img class="avatar mr-3 avatar-circle" src=/author/felipe-n.-schuch/avatar_hu8ccf1005bffbd7f5e7f26c831ac988b4_62426_270x270_fill_q90_lanczos_center.jpg alt="Felipe N. Schuch"></a><div class=media-body><h5 class=card-title><a href=https://www.fschuch.com/>Felipe N. Schuch</a></h5><h6 class=card-subtitle>Application Engineer</h6><p class=card-text>Possuo experiência na aplicação e também no desenvolvimento de ferramentas computacionais capazes de resolver problemas complexos, além de realizar o processamento, visualização e comunicação dos dados produzidos por essas soluções.</p><ul class=network-icon aria-hidden=true><li><a href=mailto:me@fschuch.com><i class="fas fa-envelope"></i></a></li><li><a href=https://www.linkedin.com/in/fschuch/ target=_blank rel=noopener><i class="fab fa-linkedin"></i></a></li><li><a href=https://github.com/fschuch target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a href=https://twitter.com/fschuch target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li></ul></div></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Anterior</div><a href=/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/ rel=prev>Jupyter Notebook como uma Poderosa Ferramenta Educacional</a></div></div></div><div class="article-widget content-widget-hr"><h3>Relacionados</h3><ul><li><a href=/blog/2019/07/23/desafio-de-programacao-o-jogo-pedra-papel-e-tesoura/>Desafio de Programação: O jogo Pedra, Papel e Tesoura</a></li><li><a href=/talk/acelerando-a-exploracao-de-dados-multidimensionais-com-xarray/>Acelerando a exploração de dados multidimensionais com Xarray</a></li><li><a href=/talk/metodos-numericos-em-python/>Métodos Numéricos em Python</a></li><li><a href=/talk/python-and-xcompact3d/>Python and XCompact3d</a></li><li><a href=/talk/sandbox-flow-configuration-a-rapid-prototyping-tool-inside-xcompact3d/>Sandbox flow configuration: A rapid prototyping tool inside XCompact3d</a></li></ul></div></div></article></div><div class=page-footer><div class=container><footer class=site-footer><script data-ad-client=ca-pub-9439284423075563 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><p class=powered-by></p><p class="powered-by copyright-license-text">© 2020-2024 Felipe N. Schuch. All content is licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0 rel="noopener noreferrer" target=_blank>CC BY SA 4.0</a></p><p class="powered-by footer-license-icons"><a href=https://creativecommons.org/licenses/by-sa/4.0 rel="noopener noreferrer" target=_blank aria-label="Creative Commons"><i class="fab fa-creative-commons fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-by fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-sa fa-2x" aria-hidden=true></i></a></p><p class=powered-by>Published with
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic Website Builder</a>
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Citação</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copiar</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.4/mermaid.min.js integrity="sha512-as1BF4+iHZ3BVO6LLDQ7zrbvTXM+c/1iZ1qII/c3c4L8Rn5tHLpFUtpaEtBNS92f+xGsCzsD7b62XP3XYap6oA==" crossorigin=anonymous title=mermaid></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/bash.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/diff.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/fortran.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/makefile.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/markdown.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/lua.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js></script><script id=search-hit-fuse-template type=text/x-template>
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/js/bootstrap.bundle.min.6aed84840afc03ab4d5750157f69c120.js></script><script src=/pt/js/wowchemy.min.5eedfaf253f2d60589868ae11b902a4a.js></script></body></html>