<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>NumPy | F. Schuch</title><link>https://www.fschuch.com/tag/numpy/</link><atom:link href="https://www.fschuch.com/tag/numpy/index.xml" rel="self" type="application/rss+xml"/><description>NumPy</description><generator>Wowchemy (https://wowchemy.com)</generator><language>pt-br</language><copyright>© 2020-2025 Felipe N. Schuch</copyright><lastBuildDate>Tue, 04 May 2021 15:30:00 -0300</lastBuildDate><image><url>https://www.fschuch.com/media/icon_hu25d0b20bf2bf90ac27c6cbd6ce22358d_22074_512x512_fill_lanczos_center_2.png</url><title>NumPy</title><link>https://www.fschuch.com/tag/numpy/</link></image><item><title>Métodos Numéricos em Python</title><link>https://www.fschuch.com/talk/metodos-numericos-em-python/</link><pubDate>Tue, 04 May 2021 15:30:00 -0300</pubDate><guid>https://www.fschuch.com/talk/metodos-numericos-em-python/</guid><description>&lt;p>Esta palestra tem por objetivo introduzir os principais conceitos de programação e Python, empregando a didática interativa da plataforma Jupyter Notebook. Além disso, demonstra-se como solucionar problemas em métodos numéricos por meio de propostas computacionais. Para tanto, o material é dividido em duas aulas:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;a href="http://nbviewer.jupyter.org/github/fschuch/metodos-numericos-com-python/blob/main/Aulas/01-Introdu%c3%a7%c3%a3o-Python-Bibliotecas.ipynb" target="_blank" rel="noopener">Ligeira Introdução à Python&lt;/a>, contemplando:&lt;/p>
&lt;ul>
&lt;li>Introdução e revisão sobre conceitos de programação em Python;&lt;/li>
&lt;li>Manipulação de tensores em Python com Numpy;&lt;/li>
&lt;li>Produção de gráficos com o pacote Matplotlib;&lt;/li>
&lt;li>Cálculo Diferencial e Integral com Python;&lt;/li>
&lt;li>Resolvendo Equações Diferenciais;&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>Exemplos de aplicação em Fenômenos de Transporte (próxima semana).&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="configurando-o-tutorial">Configurando o Tutorial&lt;/h2>
&lt;p>Esse tutorial foi projetado para rodar no &lt;a href="https://mybinder.org/" target="_blank" rel="noopener">Binder&lt;/a>.
O serviço permite executar totalmente na nuvem, nenhuma instalação extra é necessária.
Para tanto, basta clicar &lt;a href="https://mybinder.org/v2/gh/fschuch/metodos-numericos-com-python/main?urlpath=lab" target="_blank" rel="noopener">aqui&lt;/a>:
&lt;a href="https://mybinder.org/v2/gh/fschuch/metodos-numericos-com-python/main?urlpath=lab" target="_blank" rel="noopener">&lt;img src="https://mybinder.org/badge_logo.svg" alt="Binder">&lt;/a>&lt;/p>
&lt;p>Se você prefere instalar o tutorial localmente, siga os seguintes passos:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Clone o repositório:&lt;/p>
&lt;pre>&lt;code class="language-bash">git clone https://github.com/fschuch/metodos-numericos-com-python
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>Instale o ambiente. O repositório inclui um arquivo &lt;code>environment.yaml&lt;/code> que contém uma lista de todos os pacotes necessários para executar esse tutorial.
Para instalá-los usando conda, use o comando:&lt;/p>
&lt;pre>&lt;code class="language-bash">conda env create -f environment.yml
conda activate metodos-numericos-python
&lt;/code>&lt;/pre>
&lt;/li>
&lt;li>
&lt;p>Inicie uma seção Jupyter:&lt;/p>
&lt;pre>&lt;code class="language-bash">jupyter lab
&lt;/code>&lt;/pre>
&lt;/li>
&lt;/ol></description></item><item><title>Jupyter Notebook como uma Poderosa Ferramenta Educacional</title><link>https://www.fschuch.com/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/</link><pubDate>Fri, 22 Jan 2021 00:00:00 +0000</pubDate><guid>https://www.fschuch.com/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/</guid><description>&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Lista de Conteúdos&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#introdução">Introdução&lt;/a>&lt;/li>
&lt;li>&lt;a href="#o-que-é-um-jupyter-notebook">O que é um Jupyter Notebook?&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#formas-de-acessarcompartilhar">Formas de Acessar/Compartilhar&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#conceitos-pedagógicos">Conceitos Pedagógicos&lt;/a>&lt;/li>
&lt;li>&lt;a href="#curva-de-progressão">Curva de Progressão&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#nível-inicial">Nível Inicial&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nível-intermediário">Nível Intermediário&lt;/a>&lt;/li>
&lt;li>&lt;a href="#nível-avançado">Nível Avançado&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#leitura-recomendada">Leitura Recomendada&lt;/a>&lt;/li>
&lt;li>&lt;a href="#exemplos">Exemplos&lt;/a>&lt;/li>
&lt;li>&lt;a href="#conclusão">Conclusão&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="introdução">Introdução&lt;/h2>
&lt;p>O ambiente Jupyter Notebook vem se consolidando como principal ferramenta de trabalho em Ciência de Dados, Aprendizado de Máquina e Inteligência Artificial.
Muitas das características que o tornam tão popular nessas áreas também o colocam em uma posição de &lt;strong>destaque para o campo educacional&lt;/strong>.
As opções mais intuitivas seriam no ensino de engenharia ou ciência exatas em geral, mas não se engane, qualquer atividade que envolva o trabalho com dados pode se beneficiar, incluindo as ciências da saúde e as ciências humanas.&lt;/p>
&lt;p>Esse post apresenta uma contextualização sobre o &lt;a href="https://jupyter.org/" target="_blank" rel="noopener">Projeto Jupyter&lt;/a>, uma explanação sobre a utilidade da ferramenta no cenário pedagógico, além da exemplificação de como se pode avançar progressivamente ao combinar Jupyter com diversas outras ferramentas do universo Python, para tornar a experiência mais agradável tanto para docentes quanto para estudantes. Ao final, apresenta-se a leitura recomendada e exemplos de aplicação.&lt;/p>
&lt;div class="alert alert-note">
&lt;div>
Essa própria postagem foi produzida a partir de um Jupyter Notebook, assim como muitas outras nesse blog, mostrando a flexibilidade da ferramenta para a produção de conteúdo em geral.
&lt;/div>
&lt;/div>
&lt;!--adsense-->
&lt;h2 id="o-que-é-um-jupyter-notebook">O que é um Jupyter Notebook?&lt;/h2>
&lt;p>O &lt;a href="https://jupyter.org/" target="_blank" rel="noopener">Projeto Jupyter&lt;/a> foi fundado em 2015, sendo uma organização sem fins lucrativos que visa desenvolver software aberto e serviços para computação interativa. A denominação do projeto é uma referências às três principais linguagens de programação suportadas por ele, &lt;a href="https://julialang.org/" target="_blank" rel="noopener">Julia&lt;/a>, &lt;a href="https://www.python.org/" target="_blank" rel="noopener">Python&lt;/a> e &lt;a href="https://www.r-project.org/" target="_blank" rel="noopener">R&lt;/a> (&lt;a href="https://github.com/jupyter/jupyter/wiki/Jupyter-kernels" target="_blank" rel="noopener">veja todas as linguagens suportadas aqui&lt;/a>), e também uma homenagem aos cadernos onde &lt;a href="https://pt.wikipedia.org/wiki/Galileu_Galilei" target="_blank" rel="noopener">Galileu Galilei&lt;/a> tomava nota de suas descobertas sobre as luas de Júpiter.&lt;/p>
&lt;p>O Jupyter Notebook é uma das peças do projeto, compreendendo o software no qual se pode criar os cadernos de anotações Jupyter (&lt;em>Jupyter notebooks&lt;/em>), que por sua vez são constituídos por um ambiente de programação que &lt;strong>mistura blocos de código executável, visualizações e texto enriquecido&lt;/strong> com equações, figuras, animações, tabelas, links que redirecionem para recursos externos, títulos e subtítulos, listas e muitos outros recursos.
Essa flexibilidade permite ao usuário unir código, dados e narrativa, para construir uma verdadeira &lt;strong>história computacional e interativa&lt;/strong>.
É possível executar o código, ver o que acontece, modificar e repetir, onde o usuário tem uma &lt;em>conversa&lt;/em> com os dados que está analisando.
Veja o exemplo a seguir:&lt;/p>
&lt;figure id="figure-exemplo-de-um-jupyter-notebook-começando-por-um-bloco-de-texto-em-markdown-contendo-um-título-explicações-e-uma-equação-renderizada-com-latexhttpswwwlatex-projectorg-três-blocos-de-código-produzem-o-gráfico-final-fonte-adaptado-de-la-barba-et-al-2019httpsjupyter4edugithubiojupyter-edu-book">
&lt;div class="d-flex justify-content-center">
&lt;div class="w-100" >
&lt;img alt="Exemplo de um Jupyter Notebook, começando por um bloco de texto em markdown contendo um título, explicações e uma equação renderizada com [LaTeX](https://www.latex-project.org/). Três blocos de código produzem o gráfico final. Fonte: Adaptado de [L.A. Barba et al. (2019)](https://jupyter4edu.github.io/jupyter-edu-book/)." srcset="
/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/figure_hu23f249effb7277f4d44bfabb20b1d620_223359_7372e6c61fb2e044be1f0e827e8ffddc.jpg 400w,
/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/figure_hu23f249effb7277f4d44bfabb20b1d620_223359_82b292b2cde02e606bb43f91bff88d13.jpg 760w,
/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/figure_hu23f249effb7277f4d44bfabb20b1d620_223359_1200x1200_fit_q90_lanczos.jpg 1200w"
src="https://www.fschuch.com/blog/2021/01/22/jupyter-notebook-como-uma-poderosa-ferramenta-educacional/figure_hu23f249effb7277f4d44bfabb20b1d620_223359_7372e6c61fb2e044be1f0e827e8ffddc.jpg"
width="760"
height="488"
loading="lazy" data-zoomable />&lt;/div>
&lt;/div>&lt;figcaption>
Exemplo de um Jupyter Notebook, começando por um bloco de texto em markdown contendo um título, explicações e uma equação renderizada com &lt;a href="https://www.latex-project.org/">LaTeX&lt;/a>. Três blocos de código produzem o gráfico final. Fonte: Adaptado de &lt;a href="https://jupyter4edu.github.io/jupyter-edu-book/">L.A. Barba et al. (2019)&lt;/a>.
&lt;/figcaption>&lt;/figure>
&lt;p>Além disso, &lt;strong>Jupyter é uma ferramenta grátis e de código aberto&lt;/strong>. Está disponível para os principais sistemas operacionais do mercado e também por serviços remotos na nuvem, onde apenas o acesso a um navegador de internet é o suficiente para utilizar a ferramenta. Esse é um ponto importante frente à outras alternativas de software proprietário, que os alunos muitas vezes sequer conseguem ter acesso fora das instituições de ensino.&lt;/p>
&lt;h3 id="formas-de-acessarcompartilhar">Formas de Acessar/Compartilhar&lt;/h3>
&lt;p>A maneira mais simples de testar o Jupyter é por meio &lt;a href="https://colab.research.google.com/" target="_blank" rel="noopener">Colaboratory&lt;/a>, ou simplesmente &lt;em>Colab&lt;/em>, um serviço Google que permite a criação, colaboração e compartilhamento de Notebooks inteiramente na nuvem.&lt;/p>
&lt;p>Outra opção é o &lt;a href="https://mybinder.org/" target="_blank" rel="noopener">Binder&lt;/a>, serviço na nuvem que permite construir ambientes personalizados e lançar um servidor Jupyter na nuvem a partir de um repositório do GitHub. Além disso, o site apresenta um tutorial de como utilizar o Jupyter em Julia, Python e R.&lt;/p>
&lt;p>Para instalação local em sua máquina, o Jupyter já acompanha as principais instalações do &lt;a href="https://www.anaconda.com/" target="_blank" rel="noopener">Anaconda&lt;/a>, um gerenciador de pacotes Python. Caso já tenha Anaconda instalado mas não o Jupyter, basta utilizar o comando:&lt;/p>
&lt;pre>&lt;code class="language-bash">conda install -c conda-forge jupyterlab
&lt;/code>&lt;/pre>
&lt;p>Outra possibilidade é o gerenciar de pacotes Python &lt;a href="https://pypi.org/project/pip/" target="_blank" rel="noopener">pip&lt;/a>, com o comando:&lt;/p>
&lt;pre>&lt;code class="language-bash">pip install jupyterlab
&lt;/code>&lt;/pre>
&lt;p>Por fim, o &lt;a href="https://jupyter.org/hub" target="_blank" rel="noopener">JupyterHub&lt;/a> disponibiliza o poder de Jupyter para um grupo de usuários (estudantes de um curso ou um grupo de pesquisa, por exemplo), gerenciando ambientes virtuais e recursos computacionais.&lt;/p>
&lt;p>Os Jupyter notebooks podem ser exportados em diversos formatos, dependendo do meio onde serão distribuídos. O arquivo &lt;code>.ipynb&lt;/code> é o notebook em sua essência, possibilitando aos demais executar e interagir com o seu conteúdo.
É possível exportar como PDF, para impressão e compartilhamento, Markdown ou HTML para visualização web (como esse post), LaTeX para inclusão em material técnico/científico e até mesmo para apresentação de slides.&lt;/p>
&lt;h2 id="conceitos-pedagógicos">Conceitos Pedagógicos&lt;/h2>
&lt;p>Como vimos anteriormente, a mistura entre blocos de código executáveis e blocos de texto enriquecido permitem ao Jupyter e seus usuários algo como combinar as explicações tradicionalmente encontrada nos livros com a interatividade de um aplicativo web.
E com isso, Jupyter pode ter seu papel de destaque também como ferramenta educacional.
Por ser tão flexível, se enquadra não apenas em áreas do conhecimento onde a programação é um objetivo final, mas também em áreas onde &lt;strong>a programação se apresenta como um meio para analisar e resolver problemas&lt;/strong>.&lt;/p>
&lt;p>A aplicação de Jupyter no ensino pode se dar nos mais &lt;strong>diversos formatos&lt;/strong>, a depender das necessidades do curso, e do conforto/interesse do instrutor para elaborar o material.
Jupyter pode compreender apenas parte de uma aula, ou um curso inteiro. Pode ser utilizado para produzir a apostila que o turma deverá seguir durante o curso, o material de apoio, leitura complementar, listas de exercícios, exercícios resolvidos ou o gabarito de atividades avaliativas.
Pode ser apresentado e encorajado como um formato no qual os alunos possam realizar e entregar o dever de casa e atividades avaliativas.
Podem ser exibidos durante uma aula demonstrativa, presencial ou online, ou convidar os alunos a interagir com o conteúdo durante uma aula prática em laboratório.
&lt;strong>O objetivo é instigar o aprendizado ativo&lt;/strong>, aumentando o engajamento, participação, entendimento, desempenho e a preparação para a carreira futura dos alunos.
É exercitada a criatividade, raciocínio lógico, capacidade de resolver problemas, comunicação e outras habilidades que são indispensáveis para qualquer área de atuação.&lt;/p>
&lt;h2 id="curva-de-progressão">Curva de Progressão&lt;/h2>
&lt;p>Esta seção apresenta uma descrição (não exaustiva) da curva de aprendizado para alunos e instrutores, exemplificada com programação em Python e suas principais bibliotecas de uso geral.&lt;/p>
&lt;p>Mas antes de começar, vale mencionar que o nível zero é dominar as denominadas células &lt;em>Markdown&lt;/em>, para texto enriquecido. Nelas, é possível inserir equações com sintaxe $\LaTeX$:&lt;/p>
&lt;p>$$E = mc^2,$$&lt;/p>
&lt;p>títulos e subtítulos, texto em &lt;strong>destaque&lt;/strong> e &lt;em>itálico&lt;/em>. Temos também listas:&lt;/p>
&lt;ul>
&lt;li>Item 1&lt;/li>
&lt;li>Item 2&lt;/li>
&lt;li>Item 3&lt;/li>
&lt;/ul>
&lt;p>Citações:&lt;/p>
&lt;blockquote>
&lt;p>Considere usar Jupyter na sua instituição de ensino (2021, F. N. Schuch).&lt;/p>
&lt;/blockquote>
&lt;p>Além de código com destaque de sintaxe, lista de tarefas, tabelas, figuras, vídeos, links e muito mais (&lt;a href="https://guides.github.com/features/mastering-markdown/" target="_blank" rel="noopener">veja mais detalhes aqui&lt;/a>).&lt;/p>
&lt;h3 id="nível-inicial">Nível Inicial&lt;/h3>
&lt;p>Uma vez que sabemos como adicionar blocos explicativos detalhados, o próximo passo é trabalhar com blocos de código. Vamos tomar como exemplo o caso do movimento uniformemente variável, onde a posição de um dado objeto no espaço em função do tempo é dado pela seguinte equação:&lt;/p>
&lt;p>$$ S(t) = S_0 + v_0t + \dfrac{at^2}{2}, $$&lt;/p>
&lt;p>onde $S$ é a posição, $S_0$ a posição inicial, $v_0$ é a velocidade inicial, $a$ a aceleração e $t$ o tempo.&lt;/p>
&lt;p>Digamos que a aula não seja de programação, mas mesmo assim, a turma pode ser convidada a interagir com o problema e testar diferentes respostas ao alterar os parâmetros quando o seguinte bloco de código é fornecido:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Atribuímos os parâmetros do problema
S0 = 0
v0 = 10
a = -1
t = 10
# A equação que descreve o problema
S = S0 + v0 * t + (a * t ** 2) / 2
# Por fim, exibimos a resposta
print(S)
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-text">50.0
&lt;/code>&lt;/pre>
&lt;p>Essa situação pode se aplicar nas mais diversas disciplinas que envolvam algum tipo de cálculo, análise de dados e/ou tomada de decisão.
Ou dependendo do objetivo do material, o bloco de código pode estar em vazio, servindo como um convite para que a turma resolva o problema por meio de ferramentas computacionais com uma barreira de entrada mínima.&lt;/p>
&lt;h3 id="nível-intermediário">Nível Intermediário&lt;/h3>
&lt;p>Como próximo passo, pode-se incluir mais aspectos de lógica de programação, como: &lt;a href="https://docs.python.org/pt-br/3/tutorial/controlflow.html#for-statements" target="_blank" rel="noopener">laços&lt;/a>, &lt;a href="https://docs.python.org/pt-br/3/tutorial/controlflow.html#if-statements" target="_blank" rel="noopener">testes lógicos&lt;/a>, &lt;a href="https://docs.python.org/pt-br/3/tutorial/inputoutput.html" target="_blank" rel="noopener">entrada e saída de arquivos&lt;/a>, &lt;a href="https://docs.python.org/pt-br/3/tutorial/controlflow.html#defining-functions" target="_blank" rel="noopener">funções&lt;/a>, &lt;a href="https://docs.python.org/pt-br/3/tutorial/errors.html" target="_blank" rel="noopener">controle de erros e exceções&lt;/a> e a manipulação de &lt;a href="%28https://docs.python.org/pt-br/3/tutorial/datastructures.html%29">estruturas de dados&lt;/a>.&lt;/p>
&lt;p>Outro ponto chave é a utilização de ferramentas mais sofisticadas para álgebra matricial, produção de gráficos, álgebra analítica e métodos numéricos. Quatro exemplos são incluídos a seguir.&lt;/p>
&lt;h4 id="numpy">Numpy&lt;/h4>
&lt;p>&lt;a href="https://numpy.org/" target="_blank" rel="noopener">Numpy&lt;/a> é um pacote fundamental para a computação científica em Python. Dentre outras coisas, destaca-se pela definição e &lt;strong>manipulação de arranjos de dados multidimensionais&lt;/strong> (tensores), conveniente álgebra linear, transformada de Fourier e capacidade de produzir números aleatórios.&lt;/p>
&lt;p>No nível anterior, o problema do movimento uniformemente variável foi resolvido para obter a distância de deslocamento para um único ponto no tempo. Vamos usar um espaço linear do Numpy, indo de 0 à 20, discretizado em 51 pontos temporais. O código é o que segue:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Importamos a biblioteca
import numpy
# Criamos o espaço linear
tempo = numpy.linspace(0, 20, num=51, endpoint=True)
# Exibimos a variável na tela
tempo
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-text">array([ 0. , 0.4, 0.8, 1.2, 1.6, 2. , 2.4, 2.8, 3.2, 3.6, 4. ,
4.4, 4.8, 5.2, 5.6, 6. , 6.4, 6.8, 7.2, 7.6, 8. , 8.4,
8.8, 9.2, 9.6, 10. , 10.4, 10.8, 11.2, 11.6, 12. , 12.4, 12.8,
13.2, 13.6, 14. , 14.4, 14.8, 15.2, 15.6, 16. , 16.4, 16.8, 17.2,
17.6, 18. , 18.4, 18.8, 19.2, 19.6, 20. ])
&lt;/code>&lt;/pre>
&lt;p>Calculamos novamente o deslocamento, agora para o vetor do bloco anterior, para cada ponto no espaço temporal teremos o retorno da respectiva posição, usando o seguinte código:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Calcula o vetor posição
posicao = S0 + v0 * tempo + (a * tempo ** 2) / 2
# Exibe o resultado na tela
posicao
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-text">array([ 0. , 3.92, 7.68, 11.28, 14.72, 18. , 21.12, 24.08, 26.88,
29.52, 32. , 34.32, 36.48, 38.48, 40.32, 42. , 43.52, 44.88,
46.08, 47.12, 48. , 48.72, 49.28, 49.68, 49.92, 50. , 49.92,
49.68, 49.28, 48.72, 48. , 47.12, 46.08, 44.88, 43.52, 42. ,
40.32, 38.48, 36.48, 34.32, 32. , 29.52, 26.88, 24.08, 21.12,
18. , 14.72, 11.28, 7.68, 3.92, 0. ])
&lt;/code>&lt;/pre>
&lt;p>Podemos extrair mais informações do vetor posição que obtivemos no bloco anterior, se lembrarmos que a velocidade para cada instante é igual ao diferencial da posição com relação ao tempo.
Mostrar exatamente como se programa um esquema diferencial é uma boa opção para um curso de métodos numéricos, ou a turma pode ser convidada a programar por si mesma.
De qualquer modo, pode-se verificar o resultado também utilizando as funções de cálculo numérico que acompanham a biblioteca Numpy, como por exemplo &lt;a href="https://numpy.org/doc/stable/reference/generated/numpy.gradient.html" target="_blank" rel="noopener">numpy.gradient&lt;/a>. Note que, em Python, pode-se acessar a documentação da função ao digitar &lt;code>help(numpy.gradient)&lt;/code>, ou ainda com o comando mágico &lt;code>numpy.gradient?&lt;/code> quando em um ambiente Jupyter. O comando &lt;code>numpy.gradient??&lt;/code> retorna o código fonte da função, possibilitando assim investigar como ela realmente foi programada.
O primeiro argumento informado para a função é o arranjo sobre o qual será calculado o gradiente, seguido pelo arranjo de coordenadas, o tempo nesse caso. &lt;code>edge_order&lt;/code> é um argumento opcional que permite escolher a precisão da derivada junto aos contornos, por padrão esse valor é 1, mas podemos usar segunda ordem ao escolher o valor 2. Veja como fica o código:&lt;/p>
&lt;pre>&lt;code class="language-python"># Diferencial da posição com relação ao tempo
velocidade = numpy.gradient(posicao, tempo, edge_order=2)
# Exibe o resultado na tela
velocidade
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-text">array([ 1.00000000e+01, 9.60000000e+00, 9.20000000e+00, 8.80000000e+00,
8.40000000e+00, 8.00000000e+00, 7.60000000e+00, 7.20000000e+00,
6.80000000e+00, 6.40000000e+00, 6.00000000e+00, 5.60000000e+00,
5.20000000e+00, 4.80000000e+00, 4.40000000e+00, 4.00000000e+00,
3.60000000e+00, 3.20000000e+00, 2.80000000e+00, 2.40000000e+00,
2.00000000e+00, 1.60000000e+00, 1.20000000e+00, 8.00000000e-01,
4.00000000e-01, 7.10542736e-15, -4.00000000e-01, -8.00000000e-01,
-1.20000000e+00, -1.60000000e+00, -2.00000000e+00, -2.40000000e+00,
-2.80000000e+00, -3.20000000e+00, -3.60000000e+00, -4.00000000e+00,
-4.40000000e+00, -4.80000000e+00, -5.20000000e+00, -5.60000000e+00,
-6.00000000e+00, -6.40000000e+00, -6.80000000e+00, -7.20000000e+00,
-7.60000000e+00, -8.00000000e+00, -8.40000000e+00, -8.80000000e+00,
-9.20000000e+00, -9.60000000e+00, -1.00000000e+01])
&lt;/code>&lt;/pre>
&lt;p>A aceleração, por sua vez, é igual ao diferencial da velocidade com relação ao tempo. Seguindo a mesma lógica do bloco anterior, temos:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Diferencial da velocidade com relação ao tempo
aceleracao = numpy.gradient(velocidade, tempo, edge_order=2)
# Exibe o resultado na tela
aceleracao
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-text">array([-1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1.,
-1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1.,
-1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1.,
-1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1., -1.])
&lt;/code>&lt;/pre>
&lt;p>Note que a aceleração constante está em conformidade com o problema aqui exemplificado, do movimento uniformemente variável.&lt;/p>
&lt;p>Confira a &lt;a href="https://numpy.org/doc/" target="_blank" rel="noopener">Documentação Numpy&lt;/a> para ver tudo que o pacote tem a oferecer.&lt;/p>
&lt;h4 id="matplotlib">Matplotlib&lt;/h4>
&lt;p>&lt;a href="https://matplotlib.org/" target="_blank" rel="noopener">Matplotlib&lt;/a> é uma biblioteca de &lt;strong>plotagem em Python&lt;/strong>, que produz figuras com qualidade de publicação em uma variedade de formatos e ambientes interativos. Você pode gerar gráficos, histogramas, espectros de potência, gráficos de barras, gráficos de erro, diagramas de dispersão e muito mais, com apenas algumas linhas de código, confira a &lt;a href="https://matplotlib.org/3.1.0/gallery/index.html" target="_blank" rel="noopener">Galeria de Exemplos&lt;/a>.&lt;/p>
&lt;p>Seguindo o caso de estudo dessa postagem, a visualização dos resultados do movimento uniformemente variável é realizada com o seguinte bloco de código:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Importamos o pacote
from matplotlib import pyplot
# Descrevemos as três linhas que irão compor o gráfico
pyplot.plot(tempo, posicao, label = 'Posição')
pyplot.plot(tempo, velocidade, label = 'Velocidade')
pyplot.plot(tempo, aceleracao, label = 'Aceleração')
# Ativamos a legenda
pyplot.legend()
# Definimos a notação do eixo horizontal
pyplot.xlabel('Tempo')
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="matplotlib.svg" alt="Exemplo Matplotlib">&lt;/p>
&lt;p>E assim, além da análise numérica, temos ferramentas de &lt;strong>visualização integradas ao ambiente Jupyter&lt;/strong>. Os alunos são convidados a interagir com a aplicação, podendo facilmente alterar os parâmetros do problema e investigar as mudanças provocadas nos resultados.&lt;/p>
&lt;h4 id="sympy">Sympy&lt;/h4>
&lt;p>&lt;a href="https://www.sympy.org" target="_blank" rel="noopener">Sympy&lt;/a> é uma biblioteca Python para &lt;strong>matemática simbólica&lt;/strong>. Seu objetivo é tornar-se um sistema de álgebra computacional (CAS) completo, mantendo o código o mais simples possível, para ser compreendido e facilmente extensível.&lt;/p>
&lt;p>Exemplificamos o uso de matemática simbólica aqui em nosso estudo de caso. Para tanto, importamos Sympy, atribuímos para variáveis Python as suas representações simbólicas com &lt;a href="https://docs.sympy.org/latest/modules/core.html#module-sympy.core.symbol" target="_blank" rel="noopener">sympy.symbols&lt;/a>, construímos a equação analítica para o movimento uniformemente variável, e por fim apresentamos a equação resultante na tela:&lt;/p>
&lt;pre>&lt;code class="language-Python">import sympy # Importamos o pacote
# Declaramos os símbolos
S0, v0, a, t = sympy.symbols(&amp;quot;S_0 v_0 a t&amp;quot;)
# Atribuímos a equação proposta
eq_posicao = S0 + v0 * t + (a * t ** 2) / 2
# Exibimos a equação na tela
eq_posicao
&lt;/code>&lt;/pre>
&lt;p>$$ S_0 + v_0t + \dfrac{at^2}{2} $$&lt;/p>
&lt;p>Um recurso interessante é a substituição alguns dos símbolos por um valor numérico:&lt;/p>
&lt;pre>&lt;code class="language-Python">eq_posicao.subs({S0: 0, v0: 10, a: -1})
&lt;/code>&lt;/pre>
&lt;p>$$ - \frac{t^{2}}{2} + 10 t$$&lt;/p>
&lt;p>Com isso, podemos graficar (com Matplotlib) a solução analítica:&lt;/p>
&lt;pre>&lt;code class="language-Python">sympy.plotting.plot(
eq_posicao.subs({S0: 0, a: -1, v0: 10}), (t, 0, 20), legend=True
)
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="sympy.svg" alt="Exemplo Sympy">&lt;/p>
&lt;p>Ou ainda substituir todos os valores, e obter o dado deslocamento para o tempo 10, por exemplo:&lt;/p>
&lt;pre>&lt;code class="language-Python">eq_posicao.subs({S0: 0, v0: 10, a: -1, t: 10})
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-text">50.0
&lt;/code>&lt;/pre>
&lt;p>A solução analítica para a velocidade é obtida ao diferenciar a equação da posição em relação ao tempo:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Velocidade é o diferencial da posição pelo tempo
eq_velocidade = sympy.diff(eq_posicao, t)
# Exibimos a equação na tela
eq_velocidade
&lt;/code>&lt;/pre>
&lt;p>$$ a t + v_{0} $$&lt;/p>
&lt;p>De maneira semelhante, a solução analítica para a aceleração é obtida ao diferenciar a equação da velocidade em relação ao tempo:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Aceleração é o diferencial da velocidade pelo tempo
eq_aceleracao = sympy.diff(eq_velocidade, t)
# Exibimos a equação na tela
eq_aceleracao
&lt;/code>&lt;/pre>
&lt;p>$$ a $$&lt;/p>
&lt;p>A aceleração é uma constante, afinal, esse é o movimento uniformemente variável.&lt;/p>
&lt;p>Muitos outros recursos estão disponíveis para a álgebra analítica com Sympy, como derivadas, integrais, limites, expansões em séries, aproximação para esquemas de diferenças finitas, resolução de equações (inclusive equações diferenciais), álgebra matricial, inequações, estatística, probabilidade, e muitos outros. Para uma visão completa, consulte a &lt;a href="https://docs.sympy.org/" target="_blank" rel="noopener">Documentação Sympy&lt;/a>.&lt;/p>
&lt;h4 id="scipy">Scipy&lt;/h4>
&lt;p>Por último, mas não menos importante, &lt;a href="https://www.scipy.org/" target="_blank" rel="noopener">Scipy&lt;/a>.
Mais do que uma biblioteca Python, Scipy é uma coleção de software de &lt;strong>código aberto para computação científica em Python&lt;/strong>. Fazem parte do projeto Numpy, Matplotlib e Sympy, que foram demonstradas anteriormente, &lt;a href="https://ipython.org/" target="_blank" rel="noopener">IPython&lt;/a>, que é na verdade o precursor do Projeto Jupyter, além de Pandas, que veremos a seguir.
Por estarem todas essas importantes bibliotecas no contexto de um mesmo projeto, percebemos a grande sinergia e interoperabilidade entre elas.&lt;/p>
&lt;p>Além disso, a própria biblioteca Scipy, um componente do universo Scipy, fornece muitas rotinas numéricas para: Integração numérica, diferenciação numérica, otimização, interpolação, transformada de Fourier, processamento de sinal, álgebra linear e álgebra linear esparsa, solução de problemas de autovalor, estatística, processamento de imagens e I/O de arquivos. Confira todos os detalhes na &lt;a href="https://docs.scipy.org/doc/" target="_blank" rel="noopener">Documentação Scipy&lt;/a>.&lt;/p>
&lt;h3 id="nível-avançado">Nível Avançado&lt;/h3>
&lt;p>Após construir a base da solução de problemas por ferramentas numéricas e analíticas na seção anterior, além de vermos como realizar gráficos com Matplotlib, chegamos agora à etapa final.&lt;/p>
&lt;p>Nesse ponto, vale destacar a importância de balancear o nível de complexidade da resolução dos problemas com a expectativa didática, a experiência dos alunos pode ser frustrante ao se deparar com centenas de linha de código sem sentido. Esse ponto de equilíbrio deve ser avaliado caso a caso.&lt;/p>
&lt;p>A seguir, veremos alternativas para estruturas de dados, e também opções para produção de figuras interativas, que são uma grande ajuda para análise e interpretação dos resultados. Vale destacar que embora esses elementos apresentem uma barreira de entrada ligeiramente maior, uma vez sejam dominados, acabam por simplificar o fluxo de trabalho, permitindo &lt;strong>resolver problemas mais complicados utilizando menos linhas de código&lt;/strong>.&lt;/p>
&lt;h4 id="estruturas-de-dados">Estruturas de Dados&lt;/h4>
&lt;p>Um passo natural após dominar Numpy, é partir para estruturas de dados mais elaboradas.
O &lt;a href="https://pandas.pydata.org/" target="_blank" rel="noopener">Pandas&lt;/a> é um pacote Python que fornece &lt;strong>estruturas de dados rápidas, flexíveis e expressivas&lt;/strong>, projetadas para tornar o trabalho com dados &lt;em>relacionais&lt;/em> ou &lt;em>rotulados&lt;/em> fáceis e intuitivos.
A ferramenta apresenta dois tipos primários de estruturas de dados: &lt;a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html#pandas.Series" target="_blank" rel="noopener">Series&lt;/a> (unidimensional) e &lt;a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" target="_blank" rel="noopener">DataFrame&lt;/a> (bidimensional); sendo ideal para trabalhar com dados tabelados (SQL, arquivos Excel ou CSV, por exemplo), que cobre a vasta maioria da análise de dados em casos como finanças, estatística, ciências sociais e diversas áreas da engenharia.
Uma das vantagens de utilizar Pandas é a facilidade com que podemos converter dados entre diferentes ferramentas. Na verdade, Pandas foi justamente construída sobre Numpy, e projetada para se integrar perfeitamente com todo a ambiente de computação científica.&lt;/p>
&lt;p>Seguindo o nosso estudo de caso, podemos agrupar os quatro vetores que construímos em Numpy em uma única estrutura Pandas, segundo o código:&lt;/p>
&lt;pre>&lt;code class="language-Python"># Importamos o pacote
import pandas
# Criamos um DataFrame com base nos vetores
# que produzimos anteriormente com Numpy
tabela = pandas.DataFrame(
{
&amp;quot;Tempo&amp;quot;: tempo,
&amp;quot;Posição&amp;quot;: posicao,
&amp;quot;Velocidade&amp;quot;: velocidade,
&amp;quot;Aceleração&amp;quot;: aceleracao,
},
)
# Exibimos as 5 primeiras linhas da tabela na tela com .head()
tabela.head()
&lt;/code>&lt;/pre>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:right">&lt;/th>
&lt;th style="text-align:right">Tempo&lt;/th>
&lt;th style="text-align:right">Posição&lt;/th>
&lt;th style="text-align:right">Velocidade&lt;/th>
&lt;th style="text-align:right">Aceleração&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:right">0&lt;/td>
&lt;td style="text-align:right">0&lt;/td>
&lt;td style="text-align:right">0&lt;/td>
&lt;td style="text-align:right">10&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:right">1&lt;/td>
&lt;td style="text-align:right">0.4&lt;/td>
&lt;td style="text-align:right">3.92&lt;/td>
&lt;td style="text-align:right">9.6&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:right">2&lt;/td>
&lt;td style="text-align:right">0.8&lt;/td>
&lt;td style="text-align:right">7.68&lt;/td>
&lt;td style="text-align:right">9.2&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:right">3&lt;/td>
&lt;td style="text-align:right">1.2&lt;/td>
&lt;td style="text-align:right">11.28&lt;/td>
&lt;td style="text-align:right">8.8&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:right">4&lt;/td>
&lt;td style="text-align:right">1.6&lt;/td>
&lt;td style="text-align:right">14.72&lt;/td>
&lt;td style="text-align:right">8.4&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Obtemos facilmente uma descrição dos dados, incluindo a contagem, média, desvio padrão, e outros, basta utilizar o método &lt;code>.describe()&lt;/code>, como segue:&lt;/p>
&lt;pre>&lt;code class="language-Python">tabela.describe()
&lt;/code>&lt;/pre>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">&lt;/th>
&lt;th style="text-align:right">Tempo&lt;/th>
&lt;th style="text-align:right">Posição&lt;/th>
&lt;th style="text-align:right">Velocidade&lt;/th>
&lt;th style="text-align:right">Aceleração&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">count&lt;/td>
&lt;td style="text-align:right">51&lt;/td>
&lt;td style="text-align:right">51&lt;/td>
&lt;td style="text-align:right">51&lt;/td>
&lt;td style="text-align:right">51&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">mean&lt;/td>
&lt;td style="text-align:right">10&lt;/td>
&lt;td style="text-align:right">32.6667&lt;/td>
&lt;td style="text-align:right">1.2539e-15&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">std&lt;/td>
&lt;td style="text-align:right">5.94643&lt;/td>
&lt;td style="text-align:right">15.6486&lt;/td>
&lt;td style="text-align:right">5.94643&lt;/td>
&lt;td style="text-align:right">8.35323e-14&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">min&lt;/td>
&lt;td style="text-align:right">0&lt;/td>
&lt;td style="text-align:right">0&lt;/td>
&lt;td style="text-align:right">-10&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">25%&lt;/td>
&lt;td style="text-align:right">5&lt;/td>
&lt;td style="text-align:right">21.12&lt;/td>
&lt;td style="text-align:right">-5&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">50%&lt;/td>
&lt;td style="text-align:right">10&lt;/td>
&lt;td style="text-align:right">36.48&lt;/td>
&lt;td style="text-align:right">7.10543e-15&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">75%&lt;/td>
&lt;td style="text-align:right">15&lt;/td>
&lt;td style="text-align:right">46.6&lt;/td>
&lt;td style="text-align:right">5&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">max&lt;/td>
&lt;td style="text-align:right">20&lt;/td>
&lt;td style="text-align:right">50&lt;/td>
&lt;td style="text-align:right">10&lt;/td>
&lt;td style="text-align:right">-1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>Conseguimos graficar todos os dados contidos na tabela com o método do DataFrame Pandas &lt;code>.plot()&lt;/code>, que internamente está invocando Matplotlib, mas para o usuário, basta digitar:&lt;/p>
&lt;pre>&lt;code class="language-Python">tabela.plot(x='Tempo')
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="matplotlib.svg" alt="Exemplo Matplotlib">&lt;/p>
&lt;p>Note que é exatamente a mesma figura que obtivemos antes com Matplotlib, mas dessa vez necessitamos de apenas uma linha de código. Recomenda-se a leitura da &lt;a href="https://pandas.pydata.org/docs/getting_started/overview.html" target="_blank" rel="noopener">Documentação Pandas&lt;/a> para uma visão geral de todas as vantagens que o pacote oferece.&lt;/p>
&lt;p>Pandas funciona muito bem para dados 1D e 2D, mas &lt;strong>e se o problema tiver mais dimensões&lt;/strong>? Bom, felizmente para esse caso temos &lt;a href="http://xarray.pydata.org/en/stable/" target="_blank" rel="noopener">Xarray&lt;/a>, um pacote Python para lidar com arranjos catalogados N-dimensionais, também construído sobre Numpy, e com as funcionalidades fortemente inspiradas em Pandas. Xarray é ainda capaz de lidar com computação paralela e mesmo arquivos maiores do que a memória disponível, graças a sua integração com &lt;a href="https://dask.org/" target="_blank" rel="noopener">Dask&lt;/a>. Temos um tutorial completo disponível em:&lt;/p>
&lt;h4 id="figuras-interativas">Figuras Interativas&lt;/h4>
&lt;p>Para exposição interativa dos resultados, possibilitando um &lt;em>conversa&lt;/em> com os dados, outros pacotes gráficos Python surgem como alternativa à Matplotlib. Um exemplo é &lt;a href="https://plotly.com/" target="_blank" rel="noopener">Plotly&lt;/a>, que também está disponível para R e JavaScript. Os nossos dados tabelados são apresentados de maneira interativa com o seguinte bloco de código (experimente interagir com o mouse e testar as diferentes ferramentas):&lt;/p>
&lt;pre>&lt;code class="language-Python">import plotly.express as px
fig = px.line(
tabela,
x=&amp;quot;Tempo&amp;quot;,
y=[&amp;quot;Posição&amp;quot;, &amp;quot;Velocidade&amp;quot;, &amp;quot;Aceleração&amp;quot;],
title=&amp;quot;Uma Figura Interativa&amp;quot;,
)
fig.show()
&lt;/code>&lt;/pre>
&lt;div id="chart-479583612" class="chart">&lt;/div>
&lt;script>
(function() {
let a = setInterval( function() {
if ( typeof window.Plotly === 'undefined' ) {
return;
}
clearInterval( a );
Plotly.d3.json("./example.json", function(chart) {
Plotly.plot('chart-479583612', chart.data, chart.layout, {responsive: true});
});
}, 500 );
})();
&lt;/script>
&lt;p>Novamente, no contexto educacional, &lt;strong>a turma é convidada a interagir com os resultados&lt;/strong>, modificar parâmetros, analisar os novos resultados, em um aprendizado ativo.&lt;/p>
&lt;p>Existe uma série de outras ferramentas gráficas interativas disponíveis para as mais diversas aplicações, podemos citar:
&lt;a href="https://altair-viz.github.io/" target="_blank" rel="noopener">altair&lt;/a>,
&lt;a href="https://bokeh.org/" target="_blank" rel="noopener">bokeh&lt;/a>,
&lt;a href="https://holoviews.org/" target="_blank" rel="noopener">holoviews&lt;/a>,
e &lt;a href="https://seaborn.pydata.org/" target="_blank" rel="noopener">seaborn&lt;/a>.&lt;/p>
&lt;h4 id="outros">Outros&lt;/h4>
&lt;p>Temos algumas outras ferramentas que merecem destaque no ambiente Jupyter com aplicações didáticas:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/jupyter-widgets/ipywidgets" target="_blank" rel="noopener">ipywidgets&lt;/a> fornece uma série de widgets interativos, como botões, caixas de seleção, controles deslizantes e muito mais, permitindo criar ferramentas interativas avançadas para análise e resolução de problemas, uma opção perfeita para aplicativos de ensino;&lt;/li>
&lt;li>&lt;a href="https://github.com/voila-dashboards/voila" target="_blank" rel="noopener">voilà&lt;/a> permite exportar todos os elementos de um Jupyter Notebook para uma apresentação em estilo aplicativo web. Confira a &lt;a href="https://voila-gallery.org/" target="_blank" rel="noopener">Galeria Voilà&lt;/a> para visualizar diversos exemplos;&lt;/li>
&lt;li>&lt;a href="https://nbgrader.readthedocs.io/en/stable/" target="_blank" rel="noopener">nbgrader&lt;/a> é uma ferramenta voltada para auxiliar os instrutores na atribuição e avaliação de tarefas em Jupyter Notebooks.&lt;/li>
&lt;/ul>
&lt;!--adsense-->
&lt;h2 id="leitura-recomendada">Leitura Recomendada&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>Teaching and Learning with Jupyter&lt;/strong>, &lt;em>Lorena A. Barba, Lecia J. Barker, Douglas S. Blank, Jed Brown, Allen B. Downey, Timothy George, Lindsey J. Heagy, Kyle T. Mandli, Jason K. Moore, David Lippert, Kyle E. Niemeyer, Ryan R. Watkins, Richard H. West, Elizabeth Wickes, Carol Willing, and Michael Zingale&lt;/em>. Open Book 2019. &lt;a href="https://jupyter4edu.github.io/jupyter-edu-book/" target="_blank" rel="noopener">Disponível online&lt;/a>.&lt;/li>
&lt;/ul>
&lt;h2 id="exemplos">Exemplos&lt;/h2>
&lt;ul>
&lt;li>
&lt;div class="view-list-item">
&lt;i class="far fa-calendar-alt pub-icon" aria-hidden="true">&lt;/i>
&lt;a href="https://www.fschuch.com/talk/metodos-numericos-em-python/" >Métodos Numéricos em Python&lt;/a>
&lt;div class="article-metadata">
&lt;span>
May 4, 2021 3:30 PM &amp;mdash; 5:30 PM
&lt;/span>
&lt;span class="middot-divider">&lt;/span>
&lt;span>PPGRHSA, IPH, UFRGS&lt;/span>
&lt;/div>
&lt;div class="btn-links">
&lt;a class="btn btn-outline-primary btn-page-header btn-sm" href="https://github.com/fschuch/metodos-numericos-com-python" target="_blank" rel="noopener">
&lt;i class="fab fa-github mr-1">&lt;/i>
Veja no GitHub
&lt;/a>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>
&lt;div class="view-list-item">
&lt;i class="far fa-calendar-alt pub-icon" aria-hidden="true">&lt;/i>
&lt;a href="https://www.fschuch.com/talk/python-introducao-e-aplicacoes-da-linguagem-de-programacao-em-engenharia/" >Python: Introdução e Aplicações da Linguagem de Programação em Engenharia&lt;/a>
&lt;div class="article-metadata">
&lt;span>
Jul 16, 2019 2:00 PM &amp;mdash; Jul 16, 2020 5:30 PM
&lt;/span>
&lt;span class="middot-divider">&lt;/span>
&lt;span>Escola Politécnica, PUCRS&lt;/span>
&lt;/div>
&lt;div class="btn-links">
&lt;a class="btn btn-outline-primary btn-page-header btn-sm" href="https://github.com/fschuch/JAEP-2019.py" target="_blank" rel="noopener">
&lt;i class="fab fa-github mr-1">&lt;/i>
Veja no GitHub
&lt;/a>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>
&lt;div class="view-list-item">
&lt;i class="far fa-calendar-alt pub-icon" aria-hidden="true">&lt;/i>
&lt;a href="https://www.fschuch.com/talk/metodos-numericos-aplicados-a-transferencia-de-calor/" >Métodos Numéricos Aplicados à Transferência de Calor&lt;/a>
&lt;div class="article-metadata">
&lt;span>
Oct 9, 2019 7:30 PM &amp;mdash; Oct 9, 2020 8:15 PM
&lt;/span>
&lt;span class="middot-divider">&lt;/span>
&lt;span>Escola Politécnica, PUCRS&lt;/span>
&lt;/div>
&lt;div class="btn-links">
&lt;a class="btn btn-outline-primary btn-page-header btn-sm" href="https://github.com/fschuch/Python-Transferencia-de-Calor" target="_blank" rel="noopener">
&lt;i class="fab fa-github mr-1">&lt;/i>
Veja no GitHub
&lt;/a>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>
&lt;div class="view-list-item">
&lt;i class="far fa-newspaper pub-icon" aria-hidden="true">&lt;/i>
&lt;a href="https://www.fschuch.com/blog/2020/01/12/cfd-com-python-12-passos-para-navier-stokes/" >CFD com Python: 12 Passos para Navier-Stokes&lt;/a>
&lt;div class="btn-links">
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>
&lt;div class="view-list-item">
&lt;i class="far fa-newspaper pub-icon" aria-hidden="true">&lt;/i>
&lt;a href="https://www.fschuch.com/blog/2020/04/11/alugar-economizar-e-pagar-a-vista-ou-financiar-um-imovel-um-estudo-de-caso/" >Alugar, economizar e pagar à vista ou financiar um imóvel? Um estudo de caso&lt;/a>
&lt;div class="btn-links">
&lt;/div>
&lt;/div>
&lt;/li>
&lt;/ul>
&lt;h2 id="conclusão">Conclusão&lt;/h2>
&lt;p>Esse foi um material demonstrativo sobre o emprego do Jupyter Notebook no contexto didático, uma vez que a ferramenta permite misturar trechos de texto descritivo com blocos de código interativos (assim como essa própria postagem), visando aumentar a participação, engajamento e desempenho dos estudantes das mais diversas áreas do conhecimento.
Jupyter é um software gratuito e de código aberto, disponível em todos os sistemas operacionais e em servidores na nuvem (teste sem nenhuma instalação), além de ser compatível com dezenas de diferentes linguagens de programação.
Por ser tão flexível, se enquadra não apenas em áreas do conhecimento onde a programação é um objetivo final, mas também em áreas onde a programação se apresenta como um meio para analisar e resolver problemas.
Para uma demonstração mais imersivas, diversos pacotes Python de aplicação geral foram exemplificados.
Certamente existe uma infinidade de outros pacotes Python com relevância ao contexto educacional, principalmente quando pensamos em soluções para problemas de domínios mais específicos.
Mas de qualquer maneira, espero que essa leitura auxilie na disseminação dessa incrível ferramenta de ensino.&lt;/p></description></item><item><title>Condução de Calor Transiente Bidimensional</title><link>https://www.fschuch.com/blog/2020/06/05/conducao-de-calor-transiente-bidimensional/</link><pubDate>Fri, 05 Jun 2020 00:00:00 +0000</pubDate><guid>https://www.fschuch.com/blog/2020/06/05/conducao-de-calor-transiente-bidimensional/</guid><description>&lt;details class="toc-inpage d-print-none " open>
&lt;summary class="font-weight-bold">Lista de Conteúdos&lt;/summary>
&lt;nav id="TableOfContents">
&lt;ul>
&lt;li>&lt;a href="#introdução">Introdução&lt;/a>&lt;/li>
&lt;li>&lt;a href="#descrição-do-problema">Descrição do Problema&lt;/a>&lt;/li>
&lt;li>&lt;a href="#desenvolvimento">Desenvolvimento&lt;/a>
&lt;ul>
&lt;li>&lt;a href="#numpy">NumPy&lt;/a>&lt;/li>
&lt;li>&lt;a href="#xarray">Xarray&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;a href="#conclusão">Conclusão&lt;/a>&lt;/li>
&lt;/ul>
&lt;/nav>
&lt;/details>
&lt;h2 id="introdução">Introdução&lt;/h2>
&lt;p>O estudo de caso apresentado aqui, a condução de calor transiente em uma placa bidimensional, tem um papel interessante, pois ele não é exatamente o objetivo deste texto, mas sim um meio.
Deixe-me explicar, dia desses me deparei com &lt;a href="http://xarray.pydata.org/en/stable/" target="_blank" rel="noopener">Xarray&lt;/a> (formalmente &lt;em>xray&lt;/em>), pacote Python que se destina a tornar o trabalho com arranjos de dados multidimensionais uma tarefa simples, eficiente e divertida.&lt;/p>
&lt;p>&lt;strong>Xarray&lt;/strong> introduz rótulos na forma de dimensões, coordenadas e atributos sobre os dados brutos dos arranjos em formato &lt;a href="https://numpy.org/" target="_blank" rel="noopener">NumPy&lt;/a>, permitindo uma experiência de desenvolvimento mais intuitiva, consistente e a prova de falhas.&lt;/p>
&lt;p>Após ler a &lt;a href="http://xarray.pydata.org/en/stable/" target="_blank" rel="noopener">documentação oficial&lt;/a>, fiquei empolgado para ver como esse pacote funciona na prática, e fico feliz em compartilhar essa experiência com você.
Aqui entra o estudo da condução de calor transiente bidimensional, que será descrito a seguir.
Logo após, o problema será resolvido com estruturas de dados &lt;strong>NumPy&lt;/strong>, para contextualizar o leitor com três abordagens diferentes, e então, o mesmo problema será resolvido com &lt;strong>Xarray&lt;/strong> para comparação.&lt;/p>
&lt;pre>&lt;code class="language-python"># Como sempre, o primeiro passo é importar
# os pacotes que vamos utilizar
# NumPy para manipulação de arranjos N-dimensionais
import numpy as np
# Matplotlib para graficar os resultados
import matplotlib.pyplot as plt
# Xarray, para testar o conceito dos rótulos
# na forma de dimensões, coordenadas e atributos
import xarray as xr
&lt;/code>&lt;/pre>
&lt;!--adsense-->
&lt;h2 id="descrição-do-problema">Descrição do Problema&lt;/h2>
&lt;p>Uma placa de cobre de \( (L_x \times L_y) = ( 50 ~ cm \times 50 ~ cm ) \) inicialmente possui temperatura em toda a sua extensão igual à \( T_0 = 0^oC \).&lt;/p>
&lt;p>Instantaneamente, a temperatura em suas bordas é elevada. Vamos admitir que cada um dos contornos tenha uma variação linear de acordo com a temperatura definida nos vértices da geometria, conforme mostra a figura a seguir:&lt;/p>
&lt;p>&lt;img src="transcal-transiente-bidimensional.jpeg" alt="Regra do Trapézio">&lt;/p>
&lt;p>Sabe-se que as propriedades do material são:&lt;/p>
&lt;ul>
&lt;li>Condutividade térmica \( k = 52 ~ W/m \cdot K \);&lt;/li>
&lt;li>Calor específico \( c_p = 420 ~ J / kg \cdot K \);&lt;/li>
&lt;li>Massa específica \( \rho = 8.800 ~ kg / m^3 \);&lt;/li>
&lt;li>Difusividade térmica \( \alpha = k / (\rho c_p) \).&lt;/li>
&lt;/ul>
&lt;p>Considerando um passo de tempo $\Delta t = 4 ~ s$ e a resolução espacial de $\Delta x = \Delta y = 5 ~ cm$, calcule a evolução da temperatura na placa até o tempo de $6.000 ~ s$.&lt;/p>
&lt;p>Equação bidimensional que define a difusão de calor:&lt;/p>
&lt;p>\[
\dfrac{\partial T}{\partial t} = \alpha \left( \dfrac{\partial ^2 T}{\partial x^2} + \dfrac{\partial ^2 T}{\partial y^2} \right), \quad 0 \le x \le L_x, \quad 0 \le y \le L_y, \quad t \ge 0.
\]&lt;/p>
&lt;p>Condições de cortorno:&lt;/p>
&lt;p>\[
T_{x0} = T(x=0,y) = y \dfrac{T_d - T_a}{L_y} + T_a,
\]
\[
T_{xn} = T(x=L_x,y) = y \dfrac{T_b - T_c}{L_y} + T_c,
\]
\[
T_{y0} = T(x,y=0) = x \dfrac{T_c - T_a}{L_x} + T_a,
\]
\[
T_{yn} = T(x,y=Ly) = x \dfrac{T_b - T_d}{L_x} + T_d.
\]&lt;/p>
&lt;p>Condição inicial:&lt;/p>
&lt;p>\[
T(x,y) = T_0, \quad para \quad t=0.
\]&lt;/p>
&lt;p>Discretizando com a derivada segunda numa representação por diferença central e a derivada primeira com diferença ascendente temos:&lt;/p>
&lt;p>\[
\dfrac{T^{n+1} _{i,j}-T^{n} _{i,j}}{\Delta t}=\alpha \left[ \dfrac{T^{n} _{i-1,j}-2T^{n} _{i,j}+T^{n} _{i+1,j}}{(\Delta x)^2} +\dfrac{T^{n} _{i,j-1}-2T^{n} _{i,j}+T^{n} _{i,j+1}}{(\Delta y)^2} \right], \quad 0 \le i \le I, \quad 0 \le j \le J, \quad n \ge 0,
\]&lt;/p>
&lt;p>\[
T_{x0} = y_j \dfrac{T_d - T_a}{L_y} + T_a, \quad para \quad i=0 \quad e \quad 0 \le j \le J,
\]
\[
T_{xn} = y_j \dfrac{T_b - T_c}{L_y} + T_c, \quad para \quad i=I \quad e \quad 0 \le j \le J,
\]
\[
T_{y0} = x_i \dfrac{T_c - T_a}{L_x} + T_a, \quad para \quad 0 \le i \le I \quad e \quad j=0,
\]
\[
T_{yn} = x_i \dfrac{T_b - T_d}{L_x} + T_d, \quad para \quad 0 \le i \le I \quad e \quad j=J,
\]
\[
T_{i,j}^n = T_0, \quad para \quad n=0.
\]&lt;/p>
&lt;p>Lembre-se que o critério de estabilidade numérica do problema é:&lt;/p>
&lt;p>\[
\Delta t \le \dfrac{\Delta x^2}{4 \alpha}.
\]&lt;/p>
&lt;h2 id="desenvolvimento">Desenvolvimento&lt;/h2>
&lt;p>Uma vez descrito o problema, partimos para a prática!
No bloco de código a seguir definimos todos os parâmetros físicos e numéricos que necessitamos:&lt;/p>
&lt;pre>&lt;code class="language-python"># Propriedades do Material
k = 52.0 # W/mK
cp = 420.0 # J/kgK
rho = 8800.0 # kg/m^3
# Temperatura nos vértices
Ta = 60.
Tb = 20.
Tc = 0.
Td = 100.
# Temperatura inicial
T0 = 0.
# Discretização espacial
x = np.linspace(start=0., stop=.5, num=21, endpoint=True)
y = np.linspace(start=0., stop=.5, num=21, endpoint=True)
# e temporal
t = np.linspace(start=0., stop=600., num=601, endpoint=True)
&lt;/code>&lt;/pre>
&lt;p>E então realizamos os primeiros cálculos:&lt;/p>
&lt;pre>&lt;code class="language-python"># Cálculo da difusividade térmica
alpha = k / (rho * cp)
# Passo de tempo e resolução da malha ao quadrado
dt, dx2, dy2 = t[1] - t[0], (x[1] - x[0])**2., (y[1] - y[0])**2.
# Estabilidade numérica
if dt &amp;lt;= np.minimum(dx2, dy2) / 4. / alpha:
print('Critério de estabilidade satisfeito.')
else:
print('Atenção! Critério de estabilidade não satisfeito.')
&lt;/code>&lt;/pre>
&lt;pre>&lt;code>Critério de estabilidade satisfeito.
&lt;/code>&lt;/pre>
&lt;p>Lembre-se que a documentação de qualquer função pode ser facilmente acessada sempre que surgir alguma dúvida sobre a sintaxe ou sobre os argumentos que ela aceita, basta digitar &lt;code>help(np.linspace)&lt;/code>.&lt;/p>
&lt;p>A partir daqui começa a resolução do problema:&lt;/p>
&lt;pre>&lt;code class="language-python"># Alocar a temperatura e impor condição inicial
T = T0 * np.ones((x.size, y.size, t.size))
# Condições de Contorno
Tx0 = (Td - Ta) / (y[-1] - y[0]) * y + Ta
Txn = (Tb - Tc) / (y[-1] - y[0]) * y + Tc
Ty0 = (Tc - Ta) / (x[-1] - x[0]) * x + Ta
Tyn = (Tb - Td) / (x[-1] - x[0]) * x + Td
# Aplicando as condições de contorno no tempo inicial
T[0, :, 0] = Tx0
T[-1, :, 0] = Txn
T[:, 0, 0] = Ty0
T[:, -1, 0] = Tyn
&lt;/code>&lt;/pre>
&lt;p>Bom, aqui fazemos uma observação quanto aos arranjos em NumPy, é preciso sempre ter em mente a maneira como foram definidos.
No caso da temperatura temos três coordenadas na ordem [x, y e t], ou [i, j e n] no espaço discreto. Portanto, ao aplicar &lt;code>T[0,:,0] = Tx0&lt;/code>, dizemos que &lt;code>T&lt;/code> será igual à &lt;code>Tx0&lt;/code> onde &lt;code>i=0&lt;/code> e &lt;code>n=0&lt;/code>, para todo o &lt;code>j&lt;/code>, exatamente o que queremos para essa condição de contorno, o mesmo pode ser percebido nas demais superfícies. Lembre-se que em Python, o índice &lt;code>-1&lt;/code> retoma o último elemento de uma dada dimensão.&lt;/p>
&lt;p>Vamos definir uma função auxiliar para graficar os resultados obtidos, assim podemos facilmente repetir a produção de figuras para as diversas abordagens que usaremos. Veja o código:&lt;/p>
&lt;pre>&lt;code class="language-python">def minha_figura(T, x, y):
fig, ax = plt.subplots(nrows=1, ncols=3, sharey=True, figsize=(12, 4))
# Variação temporal da temperatura no centro da placa
ax[0].plot(t, T[x.size // 2, y.size // 2, :])
ax[0].set(xlabel='t [s]',
ylabel=r'T [$^0C$]',
title=f'x={x[x.size//2]} e y={y[y.size//2]}')
# E duas figuras para variação espacial:
nfigs = 5
for n in range(nfigs):
time = n * ((t.size) // (nfigs - 1))
# Variação com x e t para y fixo
ax[1].plot(x, T[:, y.size // 2, time], label=f't={t[time]}s')
# Variação com y e t com x fixo
ax[2].plot(y, T[x.size // 2, :, time], label=f't={t[time]}s')
# Adicionamos alguns detalhes visuais
ax[1].set(xlabel='x [cm]', title=f'y={y[y.size//2]}')
ax[2].set(xlabel='y [cm]', title=f'x={x[x.size//2]}')
ax[1].legend()
ax[2].legend()
plt.show();
&lt;/code>&lt;/pre>
&lt;h3 id="numpy">NumPy&lt;/h3>
&lt;p>O avanço no tempo se dá ao isolarmos o termo \( T^{n+1} _{i,j} \) na equação governante discreta, que então assume a forma:&lt;/p>
&lt;p>\[
T^{n+1} _{i,j} = T^{n} _{i,j} + \alpha \Delta t \left[ \dfrac{T^{n} _{i-1,j}-2T^{n} _{i,j}+T^{n} _{i+1,j}}{(\Delta x)^2} +\dfrac{T^{n} _{i,j-1}-2T^{n} _{i,j}+T^{n} _{i,j+1}}{(\Delta y)^2} \right],
\]&lt;/p>
&lt;p>para: \(\quad 0 \le i \le I, \quad 0 \le j \le J, \quad n \ge 0 \).&lt;/p>
&lt;p>Perceba que quando &lt;code>n=0&lt;/code>, todos os valores à direita da igualdade são conhecidos (nossa condição inicial), e assim, pode-se calcular o termo à esquerda, que será a temperatura em &lt;code>n+1&lt;/code>.
Repetindo esse processo sucessivamente para cada valor de &lt;code>i&lt;/code>, &lt;code>j&lt;/code> e &lt;code>n&lt;/code>, atingimos qualquer valor de tempo desejado, passo à passo.&lt;/p>
&lt;p>A maneira mais intuitiva de programar a equação acima é escrevê-la exatamente como ela é, percorrendo todo o espaço bidimensional e o tempo por meio de três laços aninhados, e aplicando as condições de contorno ao final de cada passo de tempo:&lt;/p>
&lt;pre>&lt;code class="language-python">%%time
for n in range(t.size - 1):
for i in range(1, x.size - 1):
for j in range(1, y.size - 1):
T[i, j, n + 1] = T[i, j, n] + alpha * dt * (
(T[i - 1, j, n] - 2. * T[i, j, n] + T[i + 1, j, n]) / dx2 +
(T[i, j - 1, n] - 2. * T[i, j, n] + T[i, j + 1, n]) / dy2)
# Condições de contorno
T[0, :, n + 1], T[-1, :, n + 1], T[:, 0,
n + 1], T[:, -1,
n + 1] = Tx0, Txn, Ty0, Tyn
&lt;/code>&lt;/pre>
&lt;pre>&lt;code>Wall time: 921 ms
&lt;/code>&lt;/pre>
&lt;p>E então graficamos o resultado:&lt;/p>
&lt;pre>&lt;code class="language-python">minha_figura(T, x, y)
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="output_23_0.png" alt="png">&lt;/p>
&lt;p>Note que no tempo nós já conhecemos a solução para &lt;code>n=0&lt;/code>, então calculamos o laço temporal &lt;code>t.size-1&lt;/code> vezes. De maneira similar, a temperatura é conhecida em todas as paredes, então não precisamos resolver a equação nos contornos, e assim, cada laço temporal exclui a primeira e a última posição (&lt;code>range(1,x.size-1)&lt;/code>, por exemplo).&lt;/p>
&lt;p>Embora o bloco de código acima resolva o problema, essa não é uma boa abordagem do ponto de vista do tempo necessário para o cálculo, ao realizar sequencialmente cada uma das operações por meio do aninhamento de laços.&lt;/p>
&lt;p>Sobre &lt;strong>NumPy&lt;/strong>, além do suporte para arranjos multi-dimensionais, toda a biblioteca é programada em C. Temos o desempenho de uma linguagem compilada (C), dentro de um ambiente de linguagem interpretada (Python), o melhor de dois mundos. Para tirar proveito disso, o ideal é realizar as operações vetorialmente ao resolver o problema em &lt;em>fatias&lt;/em> (mais informações &lt;a href="https://numpy.org/doc/stable/user/basics.indexing.html?highlight=slicing#other-indexing-options" target="_blank" rel="noopener">aqui&lt;/a>), de modo que podemos reescrever o código como:&lt;/p>
&lt;pre>&lt;code class="language-python">%%time
for n in range(t.size-1):
T[1:-1,1:-1,n+1] = T[1:-1,1:-1,n] + dt * alpha * (
(T[ :-2,1:-1,n] - 2. * T[1:-1,1:-1,n] + T[2: ,1:-1,n]) / dx2 +
(T[1:-1, :-2,n] - 2. * T[1:-1,1:-1,n] + T[1:-1,2: ,n]) / dy2
)
# Condições de contorno
T[0,:,n+1], T[-1,:,n+1], T[:,0,n+1], T[:,-1,n+1] = Tx0, Txn, Ty0, Tyn
&lt;/code>&lt;/pre>
&lt;pre>&lt;code>Wall time: 21 ms
&lt;/code>&lt;/pre>
&lt;p>Vemos os resultados novamente com:&lt;/p>
&lt;pre>&lt;code class="language-python">minha_figura(T, x, y)
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="output_27_0.png" alt="png">&lt;/p>
&lt;p>Temos exatamente a mesma resposta para um tempo de cálculo inferior. Bem, esse ganho de desempenho depende das características da sua máquina e do problema, talvez podem nem ser perceptíveis quando usamos apenas 21 pontos em cada direção espacial, mas experimente aumentar esses valores.&lt;/p>
&lt;p>Uma terceira alternativa com &lt;strong>NumPy&lt;/strong> é deixar com que suas funções embarcadas façam parte do trabalho, o pacote conta com diversos recursos para derivação, integração, interpolação, trigonometria e muitos outros.&lt;/p>
&lt;p>Vale destacar que no momento não conheço nenhuma função &lt;strong>NumPy&lt;/strong> que calcule a derivada segunda em um arranjo. De qualquer maneira, se admitirmos que a derivada segunda pode ser aproximada com a aplicação dupla da derivada primeira (lembre-se que embora analiticamente sejam equivalentes, numericamente isso nem sempre é verdade), podemos usar a função &lt;a href="https://numpy.org/doc/1.18/reference/generated/numpy.gradient.html?highlight=gradient#numpy.gradient" target="_blank" rel="noopener">np.gradient&lt;/a> para reescrever nosso código na forma:&lt;/p>
&lt;pre>&lt;code class="language-python">%%timeit
for n in range(t.size-1):
T[:,:,n+1] = T[:,:,n] + dt * alpha * (
np.gradient(np.gradient(T[:,:,n], x, axis=0), x, axis=0) +
np.gradient(np.gradient(T[:,:,n], y, axis=1), y, axis=1)
)
# Condições de contorno
T[0,:,n+1], T[-1,:,n+1], T[:,0,n+1], T[:,-1,n+1] = Tx0, Txn, Ty0, Tyn
&lt;/code>&lt;/pre>
&lt;pre>&lt;code>221 ms ± 43.2 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
&lt;/code>&lt;/pre>
&lt;p>A figura dos resultados mais uma vez:&lt;/p>
&lt;pre>&lt;code class="language-python">minha_figura(T, x, y)
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="output_31_0.png" alt="png">&lt;/p>
&lt;p>Essa abordagem pode não ser tão precisa quanto as que vimos anteriormente, mas a descrição de como implementar operadores diferenciais será assunto para um outro dia.
Por outro lado, se ainda assim e erro está em uma faixa tolerável para a sua aplicação, essa pode ser uma alternativa pela facilidade de aplicação e boa legibilidade do código.
Como qualquer outro arranjo &lt;strong>NumPy&lt;/strong>, devemos lembrar de que definimos a temperatura na ordem [x, y e t], e assim, &lt;code>axis=0&lt;/code> resultará no gradiente na direção x, enquanto &lt;code>axis=1&lt;/code> será o gradiente em y.&lt;/p>
&lt;!--adsense-->
&lt;h3 id="xarray">Xarray&lt;/h3>
&lt;p>Uma vez realizada a contextualização, vamos agora abordar a transferência de calor transiente bidimensional com &lt;strong>Xarray&lt;/strong>, um pacote para estruturas de dados rotulados N-dimensionais (também denominados tensores). A sua vantagem é permitir realizar operações empregando o nome das coordenadas em vez da sua numeração (&lt;code>dim='x'&lt;/code> em vez de &lt;code>axis=0&lt;/code>), além de armazenar atributos como o nome e unidade das diversas variáveis.&lt;/p>
&lt;p>O ganho imediato em usar &lt;strong>Xarray&lt;/strong> é que escrevemos menos código. A longo prazo o ganho é a legibilidade, podemos entender o que estávamos pensando ao retomar para um código semanas ou meses depois.&lt;/p>
&lt;p>Para exemplificar, vamos iniciar criando um &lt;code>Dataset&lt;/code> para armazenar as informações do nosso problema. Existem diversos modos para isso, e uma leitura na &lt;a href="http://xarray.pydata.org/en/stable/index.html" target="_blank" rel="noopener">documentação oficial&lt;/a> é recomendada. Com o seguinte bloco de código, inicializamos nosso sistema de coordenadas:&lt;/p>
&lt;pre>&lt;code class="language-python">data = xr.Dataset(coords={
'x': np.linspace(start = 0., stop = 0.5, num = 21, endpoint = True),
'y': np.linspace(start = 0., stop = 0.5, num = 21, endpoint = True),
't': np.linspace(start = 0., stop = 600., num = 601, endpoint = True)
})
&lt;/code>&lt;/pre>
&lt;p>Ao contrário do exemplo anterior em &lt;strong>Numpy&lt;/strong> onde tínhamos as três variáveis (&lt;code>x&lt;/code>, &lt;code>y&lt;/code> e &lt;code>t&lt;/code>), aqui toda a informação está consolidada em uma única estrutura, que denominamos &lt;code>data&lt;/code>. O acesso específico a cada uma delas ocorre de maneira similar a notação dos dicionários em Python, isso é, &lt;code>data['x']&lt;/code>, ou ainda de maneira mais condensada como &lt;code>data.x&lt;/code>, por exemplo.&lt;/p>
&lt;p>Vamos adicionar atributos às nossas coordenadas para facilitar o entendimento do código, além disso, veremos que os atributos são automaticamente incluídos nas figuras, diminuindo nosso trabalho futuro. Aqui incluimos as unidades e denominamos &lt;code>t&lt;/code> como tempo:&lt;/p>
&lt;pre>&lt;code class="language-python">data.x.attrs['units'] = 'm'
data.y.attrs['units'] = 'm'
data.t.attrs['units'] = 's'
data.t.attrs['name'] = 'tempo'
&lt;/code>&lt;/pre>
&lt;p>Agora definimos a temperatura como um arranjo tridimensional (x, y e tempo) e também incluimos os atributos para referência:&lt;/p>
&lt;pre>&lt;code class="language-python">data['T'] = xr.DataArray(0., coords=[data.x, data.y, data.t])
data.T.attrs['units'] = '°C'
data.T.attrs['name'] = 'Temperatura'
&lt;/code>&lt;/pre>
&lt;p>E as propriedades do material:&lt;/p>
&lt;pre>&lt;code class="language-python">data['alpha'] = 1.407e-5
data.alpha.attrs['units'] = r'm$^2$/s'
data.alpha.attrs['name'] = 'Difusividade térmica'
&lt;/code>&lt;/pre>
&lt;p>Em um ambiente Jupyter Notebook interativo, visualizamos facilmente todo o conteúdo e atributos da nossa estrutura de dados ao imprimi-la na tela:&lt;/p>
&lt;pre>&lt;code class="language-python">data
&lt;/code>&lt;/pre>
&lt;div>&lt;svg style="position: absolute; width: 0; height: 0; overflow: hidden">
&lt;defs>
&lt;symbol id="icon-database" viewBox="0 0 32 32">
&lt;path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z">&lt;/path>
&lt;path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z">&lt;/path>
&lt;path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z">&lt;/path>
&lt;/symbol>
&lt;symbol id="icon-file-text2" viewBox="0 0 32 32">
&lt;path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z">&lt;/path>
&lt;path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z">&lt;/path>
&lt;path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z">&lt;/path>
&lt;path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z">&lt;/path>
&lt;/symbol>
&lt;/defs>
&lt;/svg>
&lt;style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
*
*/
&lt;p>:root {
&amp;ndash;xr-font-color0: var(&amp;ndash;jp-content-font-color0, rgba(0, 0, 0, 1));
&amp;ndash;xr-font-color2: var(&amp;ndash;jp-content-font-color2, rgba(0, 0, 0, 0.54));
&amp;ndash;xr-font-color3: var(&amp;ndash;jp-content-font-color3, rgba(0, 0, 0, 0.38));
&amp;ndash;xr-border-color: var(&amp;ndash;jp-border-color2, #e0e0e0);
&amp;ndash;xr-disabled-color: var(&amp;ndash;jp-layout-color3, #bdbdbd);
&amp;ndash;xr-background-color: var(&amp;ndash;jp-layout-color0, white);
&amp;ndash;xr-background-color-row-even: var(&amp;ndash;jp-layout-color1, white);
&amp;ndash;xr-background-color-row-odd: var(&amp;ndash;jp-layout-color2, #eeeeee);
}&lt;/p>
&lt;p>html[theme=dark],
body.vscode-dark {
&amp;ndash;xr-font-color0: rgba(255, 255, 255, 1);
&amp;ndash;xr-font-color2: rgba(255, 255, 255, 0.54);
&amp;ndash;xr-font-color3: rgba(255, 255, 255, 0.38);
&amp;ndash;xr-border-color: #1F1F1F;
&amp;ndash;xr-disabled-color: #515151;
&amp;ndash;xr-background-color: #111111;
&amp;ndash;xr-background-color-row-even: #111111;
&amp;ndash;xr-background-color-row-odd: #313131;
}&lt;/p>
&lt;p>.xr-wrap {
display: block;
min-width: 300px;
max-width: 700px;
}&lt;/p>
&lt;p>.xr-text-repr-fallback {
/* fallback to plain text repr when CSS is not injected (untrusted notebook) */
display: none;
}&lt;/p>
&lt;p>.xr-header {
padding-top: 6px;
padding-bottom: 6px;
margin-bottom: 4px;
border-bottom: solid 1px var(&amp;ndash;xr-border-color);
}&lt;/p>
&lt;p>.xr-header &amp;gt; div,
.xr-header &amp;gt; ul {
display: inline;
margin-top: 0;
margin-bottom: 0;
}&lt;/p>
&lt;p>.xr-obj-type,
.xr-array-name {
margin-left: 2px;
margin-right: 10px;
}&lt;/p>
&lt;p>.xr-obj-type {
color: var(&amp;ndash;xr-font-color2);
}&lt;/p>
&lt;p>.xr-sections {
padding-left: 0 !important;
display: grid;
grid-template-columns: 150px auto auto 1fr 20px 20px;
}&lt;/p>
&lt;p>.xr-section-item {
display: contents;
}&lt;/p>
&lt;p>.xr-section-item input {
display: none;
}&lt;/p>
&lt;p>.xr-section-item input + label {
color: var(&amp;ndash;xr-disabled-color);
}&lt;/p>
&lt;p>.xr-section-item input:enabled + label {
cursor: pointer;
color: var(&amp;ndash;xr-font-color2);
}&lt;/p>
&lt;p>.xr-section-item input:enabled + label:hover {
color: var(&amp;ndash;xr-font-color0);
}&lt;/p>
&lt;p>.xr-section-summary {
grid-column: 1;
color: var(&amp;ndash;xr-font-color2);
font-weight: 500;
}&lt;/p>
&lt;p>.xr-section-summary &amp;gt; span {
display: inline-block;
padding-left: 0.5em;
}&lt;/p>
&lt;p>.xr-section-summary-in:disabled + label {
color: var(&amp;ndash;xr-font-color2);
}&lt;/p>
&lt;p>.xr-section-summary-in + label:before {
display: inline-block;
content: &amp;lsquo;►&amp;rsquo;;
font-size: 11px;
width: 15px;
text-align: center;
}&lt;/p>
&lt;p>.xr-section-summary-in:disabled + label:before {
color: var(&amp;ndash;xr-disabled-color);
}&lt;/p>
&lt;p>.xr-section-summary-in:checked + label:before {
content: &amp;lsquo;▼&amp;rsquo;;
}&lt;/p>
&lt;p>.xr-section-summary-in:checked + label &amp;gt; span {
display: none;
}&lt;/p>
&lt;p>.xr-section-summary,
.xr-section-inline-details {
padding-top: 4px;
padding-bottom: 4px;
}&lt;/p>
&lt;p>.xr-section-inline-details {
grid-column: 2 / -1;
}&lt;/p>
&lt;p>.xr-section-details {
display: none;
grid-column: 1 / -1;
margin-bottom: 5px;
}&lt;/p>
&lt;p>.xr-section-summary-in:checked ~ .xr-section-details {
display: contents;
}&lt;/p>
&lt;p>.xr-array-wrap {
grid-column: 1 / -1;
display: grid;
grid-template-columns: 20px auto;
}&lt;/p>
&lt;p>.xr-array-wrap &amp;gt; label {
grid-column: 1;
vertical-align: top;
}&lt;/p>
&lt;p>.xr-preview {
color: var(&amp;ndash;xr-font-color3);
}&lt;/p>
&lt;p>.xr-array-preview,
.xr-array-data {
padding: 0 5px !important;
grid-column: 2;
}&lt;/p>
&lt;p>.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
display: none;
}&lt;/p>
&lt;p>.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
display: inline-block;
}&lt;/p>
&lt;p>.xr-dim-list {
display: inline-block !important;
list-style: none;
padding: 0 !important;
margin: 0;
}&lt;/p>
&lt;p>.xr-dim-list li {
display: inline-block;
padding: 0;
margin: 0;
}&lt;/p>
&lt;p>.xr-dim-list:before {
content: &amp;lsquo;(';
}&lt;/p>
&lt;p>.xr-dim-list:after {
content: &amp;lsquo;)';
}&lt;/p>
&lt;p>.xr-dim-list li:not(:last-child):after {
content: &amp;lsquo;,';
padding-right: 5px;
}&lt;/p>
&lt;p>.xr-has-index {
font-weight: bold;
}&lt;/p>
&lt;p>.xr-var-list,
.xr-var-item {
display: contents;
}&lt;/p>
&lt;p>.xr-var-item &amp;gt; div,
.xr-var-item label,
.xr-var-item &amp;gt; .xr-var-name span {
background-color: var(&amp;ndash;xr-background-color-row-even);
margin-bottom: 0;
}&lt;/p>
&lt;p>.xr-var-item &amp;gt; .xr-var-name:hover span {
padding-right: 5px;
}&lt;/p>
&lt;p>.xr-var-list &amp;gt; li:nth-child(odd) &amp;gt; div,
.xr-var-list &amp;gt; li:nth-child(odd) &amp;gt; label,
.xr-var-list &amp;gt; li:nth-child(odd) &amp;gt; .xr-var-name span {
background-color: var(&amp;ndash;xr-background-color-row-odd);
}&lt;/p>
&lt;p>.xr-var-name {
grid-column: 1;
}&lt;/p>
&lt;p>.xr-var-dims {
grid-column: 2;
}&lt;/p>
&lt;p>.xr-var-dtype {
grid-column: 3;
text-align: right;
color: var(&amp;ndash;xr-font-color2);
}&lt;/p>
&lt;p>.xr-var-preview {
grid-column: 4;
}&lt;/p>
&lt;p>.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
padding-right: 10px;
}&lt;/p>
&lt;p>.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
overflow: visible;
width: auto;
z-index: 1;
}&lt;/p>
&lt;p>.xr-var-attrs,
.xr-var-data {
display: none;
background-color: var(&amp;ndash;xr-background-color) !important;
padding-bottom: 5px !important;
}&lt;/p>
&lt;p>.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
display: block;
}&lt;/p>
&lt;p>.xr-var-data &amp;gt; table {
float: right;
}&lt;/p>
&lt;p>.xr-var-name span,
.xr-var-data,
.xr-attrs {
padding-left: 25px !important;
}&lt;/p>
&lt;p>.xr-attrs,
.xr-var-attrs,
.xr-var-data {
grid-column: 1 / -1;
}&lt;/p>
&lt;p>dl.xr-attrs {
padding: 0;
margin: 0;
display: grid;
grid-template-columns: 125px auto;
}&lt;/p>
&lt;p>.xr-attrs dt, dd {
padding: 0;
margin: 0;
float: left;
padding-right: 10px;
width: auto;
}&lt;/p>
&lt;p>.xr-attrs dt {
font-weight: normal;
grid-column: 1;
}&lt;/p>
&lt;p>.xr-attrs dt:hover span {
display: inline-block;
background: var(&amp;ndash;xr-background-color);
padding-right: 10px;
}&lt;/p>
&lt;p>.xr-attrs dd {
grid-column: 2;
white-space: pre-wrap;
word-break: break-all;
}&lt;/p>
&lt;p>.xr-icon-database,
.xr-icon-file-text2 {
display: inline-block;
vertical-align: middle;
width: 1em;
height: 1.5em !important;
stroke-width: 0;
stroke: currentColor;
fill: currentColor;
}
&lt;/style>&lt;pre class='xr-text-repr-fallback'>&amp;lt;xarray.Dataset&amp;gt;
Dimensions: (t: 601, x: 21, y: 21)
Coordinates:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>x (x) float64 0.0 0.025 0.05 0.075 0.1 &amp;hellip; 0.4 0.425 0.45 0.475 0.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>y (y) float64 0.0 0.025 0.05 0.075 0.1 &amp;hellip; 0.4 0.425 0.45 0.475 0.5&lt;/p>
&lt;/li>
&lt;li>
&lt;p>t (t) float64 0.0 1.0 2.0 3.0 4.0 &amp;hellip; 596.0 597.0 598.0 599.0 600.0
Data variables:
T (x, y, t) float64 0.0 0.0 0.0 0.0 0.0 0.0 &amp;hellip; 0.0 0.0 0.0 0.0 0.0
alpha float64 1.407e-05&lt;/pre>&lt;div class='xr-wrap' hidden>&lt;div class='xr-header'>&lt;div class='xr-obj-type'>xarray.Dataset&lt;/div>&lt;/div>&lt;ul class='xr-sections'>&lt;li class='xr-section-item'>&lt;input id='section-85ac3138-0203-46a2-ab26-44751956fac9' class='xr-section-summary-in' type='checkbox' disabled >&lt;label for='section-85ac3138-0203-46a2-ab26-44751956fac9' class='xr-section-summary' title='Expand/collapse section'>Dimensions:&lt;/label>&lt;div class='xr-section-inline-details'>&lt;ul class='xr-dim-list'>&lt;li>&lt;span class='xr-has-index'>t&lt;/span>: 601&lt;/li>&lt;li>&lt;span class='xr-has-index'>x&lt;/span>: 21&lt;/li>&lt;li>&lt;span class='xr-has-index'>y&lt;/span>: 21&lt;/li>&lt;/ul>&lt;/div>&lt;div class='xr-section-details'>&lt;/div>&lt;/li>&lt;li class='xr-section-item'>&lt;input id='section-f36911b6-6d63-4e1a-b1ff-ce768505f216' class='xr-section-summary-in' type='checkbox' checked>&lt;label for='section-f36911b6-6d63-4e1a-b1ff-ce768505f216' class='xr-section-summary' >Coordinates: &lt;span>(3)&lt;/span>&lt;/label>&lt;div class='xr-section-inline-details'>&lt;/div>&lt;div class='xr-section-details'>&lt;ul class='xr-var-list'>&lt;li class='xr-var-item'>&lt;div class='xr-var-name'>&lt;span class='xr-has-index'>x&lt;/span>&lt;/div>&lt;div class='xr-var-dims'>(x)&lt;/div>&lt;div class='xr-var-dtype'>float64&lt;/div>&lt;div class='xr-var-preview xr-preview'>0.0 0.025 0.05 &amp;hellip; 0.45 0.475 0.5&lt;/div>&lt;input id='attrs-05469a32-41a5-4b8a-80f6-76a04a382883' class='xr-var-attrs-in' type='checkbox' >&lt;label for='attrs-05469a32-41a5-4b8a-80f6-76a04a382883' title='Show/Hide attributes'>&lt;svg class='icon xr-icon-file-text2'>&lt;use xlink:href='#icon-file-text2'>&lt;/use>&lt;/svg>&lt;/label>&lt;input id='data-4348fd74-2e76-4601-9267-2ad2ceb62667' class='xr-var-data-in' type='checkbox'>&lt;label for='data-4348fd74-2e76-4601-9267-2ad2ceb62667' title='Show/Hide data repr'>&lt;svg class='icon xr-icon-database'>&lt;use xlink:href='#icon-database'>&lt;/use>&lt;/svg>&lt;/label>&lt;div class='xr-var-attrs'>&lt;dl class='xr-attrs'>&lt;dt>&lt;span>units :&lt;/span>&lt;/dt>&lt;dd>m&lt;/dd>&lt;/dl>&lt;/div>&lt;div class='xr-var-data'>&lt;pre>array([0. , 0.025, 0.05 , 0.075, 0.1 , 0.125, 0.15 , 0.175, 0.2 , 0.225,
0.25 , 0.275, 0.3 , 0.325, 0.35 , 0.375, 0.4 , 0.425, 0.45 , 0.475,
0.5 ])&lt;/pre>&lt;/div>&lt;/li>&lt;li class='xr-var-item'>&lt;div class='xr-var-name'>&lt;span class='xr-has-index'>y&lt;/span>&lt;/div>&lt;div class='xr-var-dims'>(y)&lt;/div>&lt;div class='xr-var-dtype'>float64&lt;/div>&lt;div class='xr-var-preview xr-preview'>0.0 0.025 0.05 &amp;hellip; 0.45 0.475 0.5&lt;/div>&lt;input id='attrs-1de9d6fb-c5be-4c05-8230-602ce3d9c5c7' class='xr-var-attrs-in' type='checkbox' >&lt;label for='attrs-1de9d6fb-c5be-4c05-8230-602ce3d9c5c7' title='Show/Hide attributes'>&lt;svg class='icon xr-icon-file-text2'>&lt;use xlink:href='#icon-file-text2'>&lt;/use>&lt;/svg>&lt;/label>&lt;input id='data-05a8bd00-385b-4a41-b685-cf9d4319e5fb' class='xr-var-data-in' type='checkbox'>&lt;label for='data-05a8bd00-385b-4a41-b685-cf9d4319e5fb' title='Show/Hide data repr'>&lt;svg class='icon xr-icon-database'>&lt;use xlink:href='#icon-database'>&lt;/use>&lt;/svg>&lt;/label>&lt;div class='xr-var-attrs'>&lt;dl class='xr-attrs'>&lt;dt>&lt;span>units :&lt;/span>&lt;/dt>&lt;dd>m&lt;/dd>&lt;/dl>&lt;/div>&lt;div class='xr-var-data'>&lt;pre>array([0. , 0.025, 0.05 , 0.075, 0.1 , 0.125, 0.15 , 0.175, 0.2 , 0.225,
0.25 , 0.275, 0.3 , 0.325, 0.35 , 0.375, 0.4 , 0.425, 0.45 , 0.475,
0.5 ])&lt;/pre>&lt;/div>&lt;/li>&lt;li class='xr-var-item'>&lt;div class='xr-var-name'>&lt;span class='xr-has-index'>t&lt;/span>&lt;/div>&lt;div class='xr-var-dims'>(t)&lt;/div>&lt;div class='xr-var-dtype'>float64&lt;/div>&lt;div class='xr-var-preview xr-preview'>0.0 1.0 2.0 &amp;hellip; 598.0 599.0 600.0&lt;/div>&lt;input id='attrs-778118c1-172d-4b9f-9100-170d21db6135' class='xr-var-attrs-in' type='checkbox' >&lt;label for='attrs-778118c1-172d-4b9f-9100-170d21db6135' title='Show/Hide attributes'>&lt;svg class='icon xr-icon-file-text2'>&lt;use xlink:href='#icon-file-text2'>&lt;/use>&lt;/svg>&lt;/label>&lt;input id='data-4bbc1156-c6a4-4f93-93a4-d3df1d27dff3' class='xr-var-data-in' type='checkbox'>&lt;label for='data-4bbc1156-c6a4-4f93-93a4-d3df1d27dff3' title='Show/Hide data repr'>&lt;svg class='icon xr-icon-database'>&lt;use xlink:href='#icon-database'>&lt;/use>&lt;/svg>&lt;/label>&lt;div class='xr-var-attrs'>&lt;dl class='xr-attrs'>&lt;dt>&lt;span>units :&lt;/span>&lt;/dt>&lt;dd>s&lt;/dd>&lt;dt>&lt;span>name :&lt;/span>&lt;/dt>&lt;dd>tempo&lt;/dd>&lt;/dl>&lt;/div>&lt;div class='xr-var-data'>&lt;pre>array([ 0., 1., 2., &amp;hellip;, 598., 599., 600.])&lt;/pre>&lt;/div>&lt;/li>&lt;/ul>&lt;/div>&lt;/li>&lt;li class='xr-section-item'>&lt;input id='section-ff720833-a331-4d73-9ea7-4c8d89a01d6d' class='xr-section-summary-in' type='checkbox' checked>&lt;label for='section-ff720833-a331-4d73-9ea7-4c8d89a01d6d' class='xr-section-summary' >Data variables: &lt;span>(2)&lt;/span>&lt;/label>&lt;div class='xr-section-inline-details'>&lt;/div>&lt;div class='xr-section-details'>&lt;ul class='xr-var-list'>&lt;li class='xr-var-item'>&lt;div class='xr-var-name'>&lt;span>T&lt;/span>&lt;/div>&lt;div class='xr-var-dims'>(x, y, t)&lt;/div>&lt;div class='xr-var-dtype'>float64&lt;/div>&lt;div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 &amp;hellip; 0.0 0.0 0.0 0.0&lt;/div>&lt;input id='attrs-b96edd68-c29a-4fde-a462-6e331f02a41b' class='xr-var-attrs-in' type='checkbox' >&lt;label for='attrs-b96edd68-c29a-4fde-a462-6e331f02a41b' title='Show/Hide attributes'>&lt;svg class='icon xr-icon-file-text2'>&lt;use xlink:href='#icon-file-text2'>&lt;/use>&lt;/svg>&lt;/label>&lt;input id='data-76b9728c-fbee-4d27-865d-ca980805f22b' class='xr-var-data-in' type='checkbox'>&lt;label for='data-76b9728c-fbee-4d27-865d-ca980805f22b' title='Show/Hide data repr'>&lt;svg class='icon xr-icon-database'>&lt;use xlink:href='#icon-database'>&lt;/use>&lt;/svg>&lt;/label>&lt;div class='xr-var-attrs'>&lt;dl class='xr-attrs'>&lt;dt>&lt;span>units :&lt;/span>&lt;/dt>&lt;dd>°C&lt;/dd>&lt;dt>&lt;span>name :&lt;/span>&lt;/dt>&lt;dd>Temperatura&lt;/dd>&lt;/dl>&lt;/div>&lt;div class='xr-var-data'>&lt;pre>array([[[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
&amp;hellip;,
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.]],&lt;/p>
&lt;p>[[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
&amp;hellip;,
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.]],&lt;/p>
&lt;p>[[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
&amp;hellip;,
&amp;hellip;
&amp;hellip;,
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.]],&lt;/p>
&lt;p>[[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
&amp;hellip;,
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.]],&lt;/p>
&lt;p>[[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
&amp;hellip;,
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.],
[0., 0., 0., &amp;hellip;, 0., 0., 0.]]])&lt;/pre>&lt;/div>&lt;/li>&lt;li class='xr-var-item'>&lt;div class='xr-var-name'>&lt;span>alpha&lt;/span>&lt;/div>&lt;div class='xr-var-dims'>()&lt;/div>&lt;div class='xr-var-dtype'>float64&lt;/div>&lt;div class='xr-var-preview xr-preview'>1.407e-05&lt;/div>&lt;input id='attrs-68b20fab-5ca0-4781-a31c-f784ea8c3804' class='xr-var-attrs-in' type='checkbox' >&lt;label for='attrs-68b20fab-5ca0-4781-a31c-f784ea8c3804' title='Show/Hide attributes'>&lt;svg class='icon xr-icon-file-text2'>&lt;use xlink:href='#icon-file-text2'>&lt;/use>&lt;/svg>&lt;/label>&lt;input id='data-4ffa7c3f-f9b0-45a8-a1b6-17fef98532f4' class='xr-var-data-in' type='checkbox'>&lt;label for='data-4ffa7c3f-f9b0-45a8-a1b6-17fef98532f4' title='Show/Hide data repr'>&lt;svg class='icon xr-icon-database'>&lt;use xlink:href='#icon-database'>&lt;/use>&lt;/svg>&lt;/label>&lt;div class='xr-var-attrs'>&lt;dl class='xr-attrs'>&lt;dt>&lt;span>units :&lt;/span>&lt;/dt>&lt;dd>m$^2$/s&lt;/dd>&lt;dt>&lt;span>name :&lt;/span>&lt;/dt>&lt;dd>Difusividade térmica&lt;/dd>&lt;/dl>&lt;/div>&lt;div class='xr-var-data'>&lt;pre>array(1.407e-05)&lt;/pre>&lt;/div>&lt;/li>&lt;/ul>&lt;/div>&lt;/li>&lt;li class='xr-section-item'>&lt;input id='section-932b59ea-38fa-4fd2-abfb-4456de4d21d0' class='xr-section-summary-in' type='checkbox' disabled >&lt;label for='section-932b59ea-38fa-4fd2-abfb-4456de4d21d0' class='xr-section-summary' title='Expand/collapse section'>Attributes: &lt;span>(0)&lt;/span>&lt;/label>&lt;div class='xr-section-inline-details'>&lt;/div>&lt;div class='xr-section-details'>&lt;dl class='xr-attrs'>&lt;/dl>&lt;/div>&lt;/li>&lt;/ul>&lt;/div>&lt;/div>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>Existe uma série de métodos para selecionar dados dentro dos nossos arranjos (mais informações &lt;a href="http://xarray.pydata.org/en/stable/indexing.html" target="_blank" rel="noopener">aqui&lt;/a>), uma delas é por meio de dicionários. Por exemplo, para impor a condição inicial na temperatura podemos usar o dicionário &lt;code>{'t' : 0}&lt;/code>, ou a notação equivalente &lt;code>dict(t=0)&lt;/code>. De maneira análoga, iremos impor as condições de contorno, como vemos:&lt;/p>
&lt;pre>&lt;code class="language-python"># Condição Inicial
data.T[dict(t=0)] = T0
# Condições de Contorno
data.T[dict(t=0,x=0)] = (Td - Ta) / (data.y[-1] - data.y[0]) * data.y + Ta
data.T[dict(t=0,x=-1)] = (Tb - Tc) / (data.y[-1] - data.y[0]) * data.y + Tc
data.T[dict(t=0,y=0)] = (Tc - Ta) / (data.x[-1] - data.x[0]) * data.x + Ta
data.T[dict(t=0,y=-1)] = (Tb - Td) / (data.x[-1] - data.x[0]) * data.x + Td
&lt;/code>&lt;/pre>
&lt;p>Se novamente admitirmos que a derivada segunda pode ser aproximada com a aplicação dupla da derivada primeira, resolvemos o problema com o seguinte bloco de código:&lt;/p>
&lt;pre>&lt;code class="language-python">%%time
for n in range(data.t.size - 1):
dt = data.t[n+1] - data.t[n]
# Equação Governate
data.T[dict(t=n+1)] = data.T.isel(t=n) + dt * data.alpha * (
data.T.isel(t=n).differentiate('x').differentiate('x') +
data.T.isel(t=n).differentiate('y').differentiate('y')
)
# Condições de Contorno
data.T[dict(t=n+1,x=0)] = data.T.isel(t=0,x=0)
data.T[dict(t=n+1,x=-1)] = data.T.isel(t=0,x=-1)
data.T[dict(t=n+1,y=0)] = data.T.isel(t=0,y=0)
data.T[dict(t=n+1,y=-1)] = data.T.isel(t=0,y=-1)
&lt;/code>&lt;/pre>
&lt;pre>&lt;code>Wall time: 5.2 s
&lt;/code>&lt;/pre>
&lt;p>Note a diferença visual em relação ao nosso exemplo anterior em &lt;strong>NumPy&lt;/strong>, onde sempre temos que lembrar da ordem de definição dos eixos para manipular os dados, como &lt;code>np.gradient(T[:,:,n], x, axis=0)&lt;/code> para derivação da temperatura no tempo &lt;code>n&lt;/code> em relação a &lt;code>x&lt;/code>, com &lt;strong>Xarray&lt;/strong> usamos simplesmente &lt;code>data.T.isel(t=n).differentiate('x')&lt;/code>.&lt;/p>
&lt;p>Outra vantagem de usar &lt;strong>Xarray&lt;/strong>, o pacote oferece uma série de funcionalidades gráficas, construídas sobre &lt;strong>Matplotlib&lt;/strong> (mais informações &lt;a href="http://xarray.pydata.org/en/stable/plotting.html" target="_blank" rel="noopener">aqui&lt;/a>), de modo que com poucas linhas de código podemos:&lt;/p>
&lt;pre>&lt;code class="language-python"># Graficar a evolução temporal da temperatura no centro da placa
data.T.isel(x=data.x.size//2, y=data.y.size//2).plot.line();
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="output_52_0.png" alt="png">&lt;/p>
&lt;pre>&lt;code class="language-python"># Variação com x e t para y fixo
data.T.isel(t=slice(None,None,120), y=data.y.size//2).plot.line(x='x');
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="output_53_0.png" alt="png">&lt;/p>
&lt;pre>&lt;code class="language-python"># Variação com y e t para x fixo
data.T.isel(t=slice(None,None,120), x=data.x.size//2).plot.line(x='y');
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="output_54_0.png" alt="png">&lt;/p>
&lt;pre>&lt;code class="language-python"># E aqui temos a completa variação espaço-temporal
data.T.sel(t=slice(None,None,40)).T.plot.contourf(
col='t',
col_wrap=4,
aspect = 1,
cmap='bone',
levels = 32
);
&lt;/code>&lt;/pre>
&lt;p>&lt;img src="output_55_0.png" alt="png">&lt;/p>
&lt;!--adsense-->
&lt;h2 id="conclusão">Conclusão&lt;/h2>
&lt;p>Com esse estudo de caso, demonstrou-se como resolver a condução de calor em placa plana bidimensional transiente empregando dois diferentes pacotes para manipulação de arranjos, &lt;strong>NumPy&lt;/strong> e &lt;strong>Xarray&lt;/strong>. Vimos como o primeiro funciona baseado na numeração dos diferentes eixos de coordenadas &lt;code>axis=0&lt;/code>, enquanto o segundo utiliza rótulos &lt;code>dim='x'&lt;/code>, em uma apresentação muito mais intuitiva e visual. Certamente, cada abordagem tem seus pontos fortes e fracos, e a escolha de uma ou outra depende do tipo de aplicação em questão e da preferência do próprio programador.&lt;/p></description></item><item><title>Métodos Numéricos Aplicados à Transferência de Calor</title><link>https://www.fschuch.com/talk/metodos-numericos-aplicados-a-transferencia-de-calor/</link><pubDate>Wed, 09 Oct 2019 19:30:00 -0300</pubDate><guid>https://www.fschuch.com/talk/metodos-numericos-aplicados-a-transferencia-de-calor/</guid><description/></item><item><title>Python: Introdução e Aplicações da Linguagem de Programação em Engenharia</title><link>https://www.fschuch.com/talk/python-introducao-e-aplicacoes-da-linguagem-de-programacao-em-engenharia/</link><pubDate>Tue, 16 Jul 2019 14:00:00 -0300</pubDate><guid>https://www.fschuch.com/talk/python-introducao-e-aplicacoes-da-linguagem-de-programacao-em-engenharia/</guid><description/></item></channel></rss>